(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{3208:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return i(2759)}])},5494:function(e,s){"use strict";s.Z={src:"/_next/static/media/general.7095fc5d.png",height:506,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxUlEQVR42mPABX6UNDP+a21nhAt8K29n/5zTovGtqFX3Z207N1zieWgHE4j+mNtm/qG0x/N7cbPW9/JWh9/1bVJ/G9uEwYreJ7WJfMjvjXhX3Jn+PrvJ5H99P/+fhnaNP41tSgwvPKpE38R3ur0vnxT3oayt/ENVQ8WnjnLjX+2NKv+bujgZXgY0sL6JbBL8kNth+LmizfZLXaPdl+Zam58tDZIYLn9TO5X9TXs9O4z/pbUK4ou38W2MH9PyGVG82dIA5gMAcORU4v0N6lsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},511:function(e,s,i){"use strict";var a=i(5893),l=i(7294);s.Z=e=>{let{children:s,isVisible:i,handleBackdropClick:r,isLarge:t}=e,[o,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),u=()=>{n(!0),setTimeout(()=>{c(!0)},400)},m=()=>{c(!1),setTimeout(()=>{n(!1)},400)};return(0,l.useEffect)(()=>{i?u():o&&m()},[i]),(0,a.jsx)("div",{className:o?"qb-modal-wrapper position-fixed":"qb-modal-wrapper position-fixed d-none",onClick:r,children:(0,a.jsx)("div",{className:d?"qb-modal-wrap  qb-modal-active":"qb-modal-wrap",children:(0,a.jsx)("div",{className:t?"qb-modal-large qb-modal-dialog-wrapper position-relative":"qb-modal-dialog-wrapper position-relative",children:(0,a.jsx)("div",{className:"qb-modal-dialog position-absolute d-flex align-items-stretch justify-content-center position-absolute",onClick:e=>{e.stopPropagation()},children:s})})})})}},6775:function(e,s,i){"use strict";var a=i(5893);i(7294);var l=i(511),r=i(5675),t=i.n(r),o=i(5494);s.Z=e=>{let{isVisible:s,handleBackdropClick:i,title:r,message:n}=e;return(0,a.jsx)(l.Z,{isVisible:s,handleBackdropClick:i,children:(0,a.jsxs)("div",{className:"w-100 p-5",children:[(0,a.jsx)("div",{className:"qb-popup-illustration-wrapper pb-3 w-100 d-flex align-items-center justify-content-center",children:(0,a.jsx)(t(),{src:o.Z,alt:"success",className:"qb-popup-illustration"})}),(0,a.jsx)("h3",{className:"qb-title mb-0 pb-3 pt-5",children:r}),(0,a.jsx)("p",{className:"qb-description mb-0 pb-4",children:n})]})})}},3188:function(e,s,i){"use strict";var a=i(5893),l=i(7294),r=i(3582),t=i(6264),o=i(5202),n=i(9655),d=i(1664),c=i.n(d);let u={email:0,password:1};s.Z=e=>{let{storeId:s,handleSuccess:i,signupUrl:d,otpUrl:m,passwordResetURL:p}=e,[h,g]=(0,l.useState)([{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"}]),[b,w]=(0,l.useState)(null),[f,v]=(0,l.useState)(!1),{apiPost:x}=(0,n.kL)(),{emailValidation:j,passwordValidation:q,returnErrorTexts:N}=(0,n.V$)(),y=(e,s)=>{let i=[...h];i[s].value=e,i[s].error=null,g(i)},P=e=>{let s=[...h],i=h[e].isPasswordVisible;s[e].keyboardType=i?"password":"default",s[e].isPasswordVisible=!i,g(s)},k=async()=>{let e=await j(h[u.email].value),a=await q(h[u.password].value);if(e&&a&&s){var l,r,t,n;let e;w(null),v(!0);let a="".concat(o.kh.qubriuxAPI,"/store/").concat(s,"/customer/signIn/email"),d=JSON.stringify({email:h[u.email].value.toLowerCase(),password:h[u.password].value,storeId:s});try{e=await x(a,d)}catch(e){w("Something went wrong! Please try again after some time."),v(!1)}(null===(l=e)||void 0===l?void 0:l.message)&&(null===(r=e)||void 0===r?void 0:r.message.toLowerCase())==="success"?(console.log("response: ",e.body),i(e.body)):((null===(t=e)||void 0===t?void 0:t.message)&&(null===(n=e)||void 0===n?void 0:n.message.toLowerCase())==="failure"&&e.body?w(e.body):w("Something went wrong! Please try again after some time."),v(!1))}else{let i=[...h];e||(i[u.email].error=await N(h[u.email].value,"email")),a||(i[u.password].error=await N(h[u.password].value,"password")),s||w("This link seems to be expired or broken, Please try again with another link."),g(i)}},A=()=>{let e=!0;return h.forEach(s=>{s.isRequired&&!s.value&&(e=!1)}),!e},E=(0,l.useMemo)(()=>A(),[h]);return(0,a.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,a.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Login"}),(0,a.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,a.jsxs)("div",{className:"row gy-3",children:[h.map((e,s)=>e.isInputHidden?null:(0,a.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:(0,a.jsx)(r.Wz,{value:e.value,id:e.id,index:s,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:P,onChange:y})},"input-".concat(s))),(null==b?void 0:b.length)?(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:b})}):null,(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex align-items-center justify-content-end",children:(0,a.jsxs)("p",{className:"qb-description",children:["Trouble logging in? ",(0,a.jsx)(c(),{href:p,className:"qb-link",children:"Reset password"})]})})}),(0,a.jsx)("div",{className:"col-lg-12",children:(0,a.jsxs)("div",{className:"w-100 pt-md-3 pt-3 d-flex align-items-center justify-content-end",children:[(0,a.jsx)("div",{className:"pe-4 d-flex align-items-center",children:(0,a.jsx)(c(),{href:m,className:"qb-link",children:"Login using OTP"})}),(0,a.jsx)("div",{className:"d-flex",children:(0,a.jsx)(t.K,{id:"qb-profile-btn",isDisabled:E,isLoading:f,onDisabledClick:()=>{let e=[...h];h.forEach((s,i)=>{s.isRequired&&!s.value&&(e[i].error=s.emptyErrorMessage?s.emptyErrorMessage:"Required field. Please fill this field to continue.")}),g([...e])},onClick:k,children:(0,a.jsxs)(a.Fragment,{children:["Login",(0,a.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})]})}),(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"w-100 flex-column align-items-center align-items-md-end d-flex",children:d?(0,a.jsxs)("p",{className:"qb-description",children:["Donâ€™t have an account? ",(0,a.jsx)(c(),{href:d,className:"qb-link",children:"Signup"})]}):null})})]})})]})}},2759:function(e,s,i){"use strict";i.r(s);var a=i(5893),l=i(7294),r=i(1163),t=i(9008),o=i.n(t),n=i(3188),d=i(8295),c=i(2838),u=i(3553),m=i(9655),p=i(5202),h=i(6775),g=i(6835);s.default=()=>{let[e,s]=(0,l.useState)(null),[i,t]=(0,l.useState)(""),[b,w]=(0,l.useState)(""),[f,v]=(0,l.useState)(""),[x,j]=(0,l.useState)(!1),[q,N]=(0,l.useState)(null),[y,P]=(0,l.useState)(!1),[k,A]=(0,l.useState)(!1),[E,S]=(0,l.useState)(null),{breakDownUrl:L}=(0,m.ZN)(),{onSignUp:R}=(0,c.ZP)(),{updateUserStorageData:T}=(0,u.Z)(),{apiGet:C}=(0,m.kL)();(0,r.useRouter)();let Z=e=>{let s="/auth/signup",i="/auth/otp-login",a="/auth/forgot-password";if(e.queries){let l;let r=0;for(l in e.queries)s="".concat(s).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),i="".concat(i).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),a="".concat(a).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),r++}t(s),v(a),w(i)},I=async e=>{let s,i="".concat(p.kh.qfferAPI,"/customer/web/signUp/email/store-info/").concat(e);try{return s=await C(i)}catch(e){return console.log(e),s}},V=(e,s)=>{N({title:e,message:s}),P(!0)},_=async e=>{var s;let i=await I(e);if(console.log("resp: ",i),i&&"success"===i.message){console.log("resp: ",i);let e=!1;(null===(s=i.body.platform)||void 0===s?void 0:s.toLowerCase())==="qffer"&&(e=!0),j(e),A(!0),S(i.body)}else(null==i?void 0:i.message)&&"failure"===i.message&&i.body&&"Something went wrong"!=i.body?(console.log("error"),setTimeout(()=>{V("Invalid link",i.body)},300)):(console.log("error"),setTimeout(()=>{V("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300))},U=async()=>{let e=window.location.href,i=await L(e);Z(i),i.queries&&i.queries.amx&&(_(i.queries.amx),s(i.queries.amx))};return(0,l.useEffect)(()=>{U()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o(),{children:(0,a.jsx)("title",{children:"Qffer | Login"})}),k?(0,a.jsx)(d.Z,{type:x?"QFFER":"GENERIC",logo:null==E?void 0:E.logo,brandColor:null==E?void 0:E.brandColor,children:(0,a.jsx)(n.Z,{storeId:e,handleSuccess:e=>{let s=e.accessToken,a={...e,signupUrl:i};R(s,a),T(a,s),window.location.href="/user/overview"},signupUrl:i,otpUrl:b,passwordResetURL:f})}):(0,a.jsx)(g.Z,{removePreloader:k,loaderType:"GENERIC"}),(0,a.jsx)(h.Z,{isVisible:y,handleBackdropClick:()=>{},title:null==q?void 0:q.title,message:null==q?void 0:q.message})]})}}},function(e){e.O(0,[1664,3582,6211,9774,2888,179],function(){return e(e.s=3208)}),_N_E=e.O()}]);