(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{6407:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(8586)}])},5494:function(e,t){"use strict";t.Z={src:"/_next/static/media/general.7095fc5d.png",height:506,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxUlEQVR42mPABX6UNDP+a21nhAt8K29n/5zTovGtqFX3Z207N1zieWgHE4j+mNtm/qG0x/N7cbPW9/JWh9/1bVJ/G9uEwYreJ7WJfMjvjXhX3Jn+PrvJ5H99P/+fhnaNP41tSgwvPKpE38R3ur0vnxT3oayt/ENVQ8WnjnLjX+2NKv+bujgZXgY0sL6JbBL8kNth+LmizfZLXaPdl+Zam58tDZIYLn9TO5X9TXs9O4z/pbUK4ou38W2MH9PyGVG82dIA5gMAcORU4v0N6lsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},511:function(e,t,s){"use strict";var i=s(5893),n=s(7294);t.Z=e=>{let{children:t,isVisible:s,handleBackdropClick:a}=e,[l,o]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1),u=()=>{o(!0),setTimeout(()=>{c(!0)},400)},d=()=>{c(!1),setTimeout(()=>{o(!1)},400)};return(0,n.useEffect)(()=>{s?u():d()},[s]),(0,i.jsx)("div",{className:l?"qb-modal-wrapper position-fixed":"qb-modal-wrapper position-fixed d-none",onClick:a,children:(0,i.jsx)("div",{className:r?"qb-modal-wrap  qb-modal-active":"qb-modal-wrap",children:(0,i.jsx)("div",{className:"qb-modal-dialog-wrapper position-relative",children:(0,i.jsx)("div",{className:"qb-modal-dialog position-absolute d-flex align-items-center justify-content-center position-absolute",onClick:e=>{e.stopPropagation()},children:t})})})})}},6775:function(e,t,s){"use strict";var i=s(5893);s(7294);var n=s(511),a=s(5675),l=s.n(a),o=s(5494);t.Z=e=>{let{isVisible:t,handleBackdropClick:s,title:a,message:r}=e;return(0,i.jsx)(n.Z,{isVisible:t,handleBackdropClick:s,children:(0,i.jsxs)("div",{className:"w-100 p-5",children:[(0,i.jsx)("div",{className:"qb-popup-illustration-wrapper pb-3 w-100 d-flex align-items-center justify-content-center",children:(0,i.jsx)(l(),{src:o.Z,alt:"success",className:"qb-popup-illustration"})}),(0,i.jsx)("h3",{className:"qb-title mb-0 pb-3 pt-5",children:a}),(0,i.jsx)("p",{className:"qb-description mb-0 pb-4",children:r})]})})}},8586:function(e,t,s){"use strict";s.r(t);var i=s(5893),n=s(7294),a=s(1163),l=s(9008),o=s.n(l),r=s(3188),c=s(3283),u=s(2838),d=s(3553),p=s(9655),m=s(7953),h=s(6775),b=s(6835);t.default=()=>{let[e,t]=(0,n.useState)(null),[s,l]=(0,n.useState)(""),[f,g]=(0,n.useState)(null),[w,A]=(0,n.useState)(!1),[v,x]=(0,n.useState)(!1),[N,j]=(0,n.useState)(null),{breakDownUrl:q}=(0,p.ZN)(),{onSignUp:k}=(0,u.ZP)(),{updateUserData:Z}=(0,d.Z)(),{apiGet:E}=(0,p.kL)();(0,a.useRouter)();let P=e=>{let t="/auth/signup";if(e.queries){let s;let i=0;for(s in e.queries)t="".concat(t).concat(0===i?"?":"&").concat(s,"=").concat(e.queries[s]),i++}l(t)},y=async e=>{let t,s="".concat(m.kh.qfferAPI,"/customer/web/signUp/email/store-info/").concat(e);try{return t=await E(s)}catch(e){return t}},S=(e,t)=>{g({title:e,message:t}),A(!0)},_=async e=>{let t=await y(e);t&&"success"===t.message?(x(!0),j(t.body)):(null==t?void 0:t.message)&&"failure"===t.message&&t.body&&"Something went wrong"!=t.body?setTimeout(()=>{S("Invalid link",t.body)},300):setTimeout(()=>{S("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300)},T=async()=>{let e=window.location.href,s=await q(e);P(s),s.queries&&s.queries.amx&&(_(s.queries.amx),t(s.queries.amx))};return(0,n.useEffect)(()=>{T()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o(),{children:(0,i.jsx)("title",{children:"Qffer | Login"})}),v?(0,i.jsx)(c.Z,{logo:null==N?void 0:N.logo,brandColor:null==N?void 0:N.brandColor,children:(0,i.jsx)(r.Z,{storeId:e,handleSuccess:e=>{let t=e.accessToken,i={...e,signupUrl:s};k(t,i),Z(i,t),window.location.href="/user/overview"},signupUrl:s})}):(0,i.jsx)(b.Z,{removePreloader:v,loaderType:"GENERIC"}),(0,i.jsx)(h.Z,{isVisible:w,handleBackdropClick:()=>{},title:null==f?void 0:f.title,message:null==f?void 0:f.message})]})}}},function(e){e.O(0,[664,775,714,774,888,179],function(){return e(e.s=6407)}),_N_E=e.O()}]);