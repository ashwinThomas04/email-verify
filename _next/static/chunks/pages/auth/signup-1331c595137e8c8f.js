(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{6700:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return a(5823)}])},5823:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return S}});var r=a(5893),i=a(7294),n=a(9008),t=a.n(n),s=a(1163),o=a(3283),d=a(5775),u=a(6264),p=a(7953),c=a(4047),y=a(9655),m=a(1664),h=a.n(m);let v={name:0,email:1,phone:2,address:3,country:4,state:5,city:6,password:7,referral:8,dob:9,gender:10,marital:11,anniversary:12,checkBox:13},f=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}],b=[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}];var g=e=>{let{storeId:l,referral:a,navigateToOtp:n,loginUrl:t}=e,[o,m]=(0,i.useState)([{label:"Name",fieldname:"name",placeholder:"John Doe",value:"",id:1,keyboardType:"default",error:null,isRequired:!0,emptyErrorMessage:"Name is required. Please provide your name.",inputWidthSize:"12"},{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Phone",fieldname:"phone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Phone number is required. Please provide your Phone number.",inputWidthSize:"12"},{label:"Address",fieldname:"address",value:"",id:9,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"MULTI_LINE",inputWidthSize:"12"},{label:"Country",fieldname:"country",placeholder:"India",value:"",id:10,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"country",emptyErrorMessage:"Country name is required. Please select your Country.",inputWidthSize:"12"},{label:"State",fieldname:"state",placeholder:"Karnataka",value:"",id:11,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT_TYPE",isDropdownOpen:!1,selectBoxType:"state",emptyErrorMessage:"State is required. Please select your State.",inputWidthSize:"6"},{label:"City",fieldname:"city",placeholder:"Bengaluru",value:"",id:12,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT_TYPE",isDropdownOpen:!1,selectBoxType:"city",emptyErrorMessage:"City name is required. Please select your City.",inputWidthSize:"6"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"},{label:"Referral code",fieldname:"referral",placeholder:"AXLTYD",value:"",id:6,keyboardType:"default",error:null,isRequired:!1},{label:"Date of birth",fieldname:"dob",placeholder:"dd/mm/yyyy",value:"",id:13,keyboardType:"date",error:null,isRequired:!0,emptyErrorMessage:"Date of birth is required. Please provide your birth date.",inputWidthSize:"6"},{label:"Gender",fieldname:"gender",placeholder:"Select",value:"",id:14,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"gender",emptyErrorMessage:"Gender is required. Please provide your gender.",inputWidthSize:"6"},{label:"Marital status",fieldname:"marital",placeholder:"Select",value:"",id:15,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"marital",inputWidthSize:"6"},{label:"Anniversary date",fieldname:"anniversary",placeholder:"dd/mm/yyyy",value:"",id:16,keyboardType:"date",error:null,isRequired:!1,isInputHidden:!0,inputWidthSize:"6"},{label:"I agree to receive loyalty rewards, offers and updates via email and text.",value:!0,id:17,error:null,isRequired:!0,emptyErrorMessage:"Please agree to receive loyalty reward communications if you wish to signup to our loyalty program.",inputWidthSize:"12",inputFieldType:"CHECKBOX"}]),[g,w]=(0,i.useState)({country:p.Ju,state:[],city:[],gender:f,marital:b}),[T,S]=(0,i.useState)(null),[x,q]=(0,i.useState)(null),[C,E]=(0,i.useState)(null),[P,k]=(0,i.useState)([]),[j,N]=(0,i.useState)([]),[R,D]=(0,i.useState)(null),[L,O]=(0,i.useState)(!1),{apiPost:F}=(0,y.kL)(),{nameValidation:M,emailValidation:I,phoneValidation:_,passwordValidation:z,returnErrorTexts:W}=(0,y.V$)();(0,s.useRouter)();let B=e=>{let l=[...o];l[e].isDropdownOpen=!o[e].isDropdownOpen,m(l)},U=e=>{k([...c.FH[e.value]]),S(e)},V=e=>{N([...c._I[e.value]]),q(e)},H=e=>{E(e)},A=e=>{let l=[...o];"Married"===e.value?l[v.anniversary].isInputHidden=!1:l[v.anniversary].isInputHidden=!0,m(l)},G=(e,l,a,r)=>{let i=[...o];i[l].isDropdownOpen=!1,i[l].value=e.label,i[l].error=null,"country"===r?U(e):"state"===r?V(e):"city"===r?H(e):"marital"===r&&A(e),m(i)},J=(e,l,a,r)=>{let i={...g};i[r]=l,w(i);let n=[...o];n[e].isDropdownOpen=a,m(n)},X=(e,l)=>{let a=[];(null==e?void 0:e.length)&&e.length>1?(P.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&a.push(l)}),(null==a?void 0:a.length)&&J(l,a,!0,"state")):e&&e.length||J(l,a,!1,"state")},K=(e,l)=>{let a=[];(null==e?void 0:e.length)&&e.length>1?(j.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&a.push(l)}),(null==a?void 0:a.length)&&J(l,a,!0,"city")):e&&e.length||J(l,a,!1,"city")},Y=(e,l,a)=>{"state"===a?X(e,l):"city"===a&&K(e,l)},Z=(e,l,a,r)=>{let i=[...o];i[l].value=e,i[l].error=null,r&&Y(e,l,r),m(i)},Q=(e,l)=>{let a=[...o];a[l].countryCode="+".concat(e.code),a[l].countryCodeValue=e.code,m(a)},$=e=>{let l=[...o],a=o[e].isPasswordVisible;l[e].keyboardType=a?"password":"default",l[e].isPasswordVisible=!a,m(l)},ee=async()=>{let e=await M(o[v.name].value),a=await I(o[v.email].value),r=await _(o[v.phone].value),i=await z(o[v.password].value);if(e&&a&&i&&r&&l){var t,s,d;let e;O(!0);let a="".concat(p.kh.qfferAPI,"/customer/web/signUp/email/").concat(l),r=JSON.stringify({name:o[v.name].value,email:o[v.email].value.toLowerCase(),phone:"".concat(o[v.phone].countryCodeValue).concat(o[v.phone].value),password:o[v.password].value,deviceId:null,referralCode:o[v.referral].value?null===(t=o[v.referral].value)||void 0===t?void 0:t.toUpperCase():null,dateOfBirth:o[v.dob].value,address:o[v.address].value,gender:o[v.gender].value,state:o[v.state].value,city:o[v.city].value,country:o[v.country].value,maritalStatus:o[v.marital].value,anniversaryDate:o[v.anniversary].value,acceptChannelCommunications:o[v.checkBox].value});try{e=await F(a,r)}catch(e){D("Something went wrong! Please try again after some time."),O(!1)}(null===(s=e)||void 0===s?void 0:s.message)==="success"?n(r,e.body):(null===(d=e)||void 0===d?void 0:d.message)==="failure"&&e.body?D(e.body):D("Something went wrong! Please try again after some time."),O(!1)}else{let n=[...o];e||(n[v.name].error=await W(o[v.name].value,"name")),a||(n[v.email].error=await W(o[v.email].value,"email")),r||(n[v.phone].error=await W(o[v.phone].value,"phone")),i||(n[v.password].error=await W(o[v.password].value,"password")),l||D("This link seems to be expired or broken, Please try again with another link."),m(n)}},el=()=>{let e=!0;return o.forEach(l=>{l.isRequired&&!l.value&&(e=!1)}),!e},ea=(0,i.useMemo)(()=>el(),[o]),er=()=>{let e=[...o];e[v.referral].value=a,m([...e])};return(0,i.useEffect)(()=>{a&&er()},[a]),(0,r.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,r.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Create account"}),(0,r.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,r.jsxs)("div",{className:"row gy-3",children:[o.map((e,l)=>e.isInputHidden?null:(0,r.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:e.inputFieldType&&"SELECT_TYPE"===e.inputFieldType?(0,r.jsx)(d.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,inputAllowed:!0,options:g[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:B,onChange:Z,onSelect:G}):e.inputFieldType&&"SELECT"===e.inputFieldType?(0,r.jsx)(d.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:g[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:B,onChange:Z,onSelect:G}):e.inputFieldType&&"PHONE"===e.inputFieldType?(0,r.jsx)(d.sb,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:Q,onChange:Z}):e.inputFieldType&&"MULTI_LINE"===e.inputFieldType?(0,r.jsx)(d.zC,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,isDisabled:e.isDisabled,onChange:Z}):e.inputFieldType&&"CHECKBOX"===e.inputFieldType?(0,r.jsx)(d.Jg,{value:e.value,id:e.id,index:l,label:e.label,error:e.error,isDisabled:e.isDisabled,onChange:Z}):(0,r.jsx)(d.Wz,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:$,onChange:Z})},"input-".concat(l))),(null==R?void 0:R.length)?(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:R})}):null,(0,r.jsx)("div",{className:"col-lg-12",children:(0,r.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-end",children:(0,r.jsx)(u.K,{id:"qb-profile-btn",isDisabled:ea,isLoading:L,onDisabledClick:()=>{let e=[...o];o.forEach((l,a)=>{l.isRequired&&!l.value&&(e[a].error=l.emptyErrorMessage?l.emptyErrorMessage:"Required field. Please fill this field to continue.")}),m([...e])},onClick:ee,children:(0,r.jsxs)(r.Fragment,{children:["Signup",(0,r.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"w-100 flex-column align-items-center align-items-md-end d-flex",children:t?(0,r.jsxs)("p",{className:"qb-description",children:["Already have an account? ",(0,r.jsx)(h(),{href:t,className:"qb-link",children:"Login"})]}):null})})]})})]})},w=a(5353),T=a(2539),S=()=>{let[e,l]=(0,i.useState)("SIGNUP"),[a,n]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[p,c]=(0,i.useState)(""),[m,h]=(0,i.useState)(null),[v,f]=(0,i.useState)(!1),[b,S]=(0,i.useState)(null),{breakDownUrl:x}=(0,y.ZN)(),q=(0,s.useRouter)(),C=()=>{l("SIGNUP")},E=e=>{let l="/auth/login";if(e.queries){let a;let r=0;for(a in e.queries)l="".concat(l).concat(0===r?"?":"&").concat(a,"=").concat(e.queries[a]),r++}c(l)},P=async()=>{let e=window.location.href,l=await x(e);E(l),l.queries&&l.queries.amx&&n(l.queries.amx),l.queries&&l.queries.ref&&u(l.queries.ref)};return(0,i.useEffect)(()=>{P()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t(),{children:(0,r.jsx)("title",{children:"Qffer | Signup"})}),(0,r.jsx)(o.Z,{children:"SIGNUP"===e?(0,r.jsx)(g,{storeId:a,referral:d,navigateToOtp:(e,a)=>{let r=JSON.parse(e);(null==a?void 0:a.shopURL)&&S(a.shopURL),h(r),l("OTP")},loginUrl:p}):(0,r.jsx)(w.Z,{authType:"SIGNUP",user:m,handleSuccess:()=>{C(),f(!0)},storeId:a})}),(0,r.jsx)(T.Z,{isVisible:v,handleBackdropClick:()=>{f(!1),b?window.location.href=b:q.push(p)},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]})}}},function(e){e.O(0,[664,775,56,774,888,179],function(){return e(e.s=6700)}),_N_E=e.O()}]);