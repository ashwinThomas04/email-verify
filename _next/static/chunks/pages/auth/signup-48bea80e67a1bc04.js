(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{6700:function(e,l,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return r(5823)}])},5823:function(e,l,r){"use strict";r.r(l),r.d(l,{default:function(){return g}});var a=r(5893),i=r(7294),o=r(4013),n=r(5775),t=r(6264),s=r(7953),d=r(4047),u=r(9655);let p={name:0,email:1,phone:2,address:3,country:4,state:5,city:6,password:7,referral:8,dob:9,gender:10,marital:11,anniversary:12,checkBox:13},c=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}],y=[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}];var m=e=>{let{storeId:l,referral:r,navigateToOtp:o}=e,[m,h]=(0,i.useState)([{label:"Name",fieldname:"name",placeholder:"John Doe",value:"",id:1,keyboardType:"default",error:null,isRequired:!0,emptyErrorMessage:"Name is required. Please provide your name.",inputWidthSize:"12"},{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Phone",fieldname:"phone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Phone number is required. Please provide your Phone number.",inputWidthSize:"12"},{label:"Address",fieldname:"address",value:"",id:9,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"MULTI_LINE",inputWidthSize:"12"},{label:"Country",fieldname:"country",placeholder:"India",value:"",id:10,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"country",emptyErrorMessage:"Country name is required. Please select your Country.",inputWidthSize:"12"},{label:"State",fieldname:"state",placeholder:"Karnataka",value:"",id:11,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT_TYPE",isDropdownOpen:!1,selectBoxType:"state",emptyErrorMessage:"State is required. Please select your State.",inputWidthSize:"6"},{label:"City",fieldname:"city",placeholder:"Bengaluru",value:"",id:12,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT_TYPE",isDropdownOpen:!1,selectBoxType:"city",emptyErrorMessage:"City name is required. Please select your City.",inputWidthSize:"6"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"},{label:"Referral code",fieldname:"referral",placeholder:"AXLTYD",value:"",id:6,keyboardType:"default",error:null,isRequired:!1},{label:"Date of birth",fieldname:"dob",placeholder:"dd/mm/yyyy",value:"",id:13,keyboardType:"date",error:null,isRequired:!0,emptyErrorMessage:"Date of birth is required. Please provide your birth date.",inputWidthSize:"6"},{label:"Gender",fieldname:"gender",placeholder:"Select",value:"",id:14,keyboardType:"default",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"gender",emptyErrorMessage:"Gender is required. Please provide your gender.",inputWidthSize:"6"},{label:"Marital status",fieldname:"marital",placeholder:"Select",value:"",id:15,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"marital",inputWidthSize:"6"},{label:"Anniversary date",fieldname:"anniversary",placeholder:"dd/mm/yyyy",value:"",id:16,keyboardType:"date",error:null,isRequired:!1,isInputHidden:!0,inputWidthSize:"6"},{label:"I agree to receive loyalty rewards, offers and updates via email and text.",value:!0,id:17,error:null,isRequired:!0,emptyErrorMessage:"Please agree to receive loyalty reward communications if you wish to signup to our loyalty program.",inputWidthSize:"12",inputFieldType:"CHECKBOX"}]),[v,f]=(0,i.useState)({country:s.Ju,state:[],city:[],gender:c,marital:y}),[b,g]=(0,i.useState)(null),[w,T]=(0,i.useState)(null),[S,x]=(0,i.useState)(null),[C,q]=(0,i.useState)([]),[E,P]=(0,i.useState)([]),[k,j]=(0,i.useState)(null),[D,N]=(0,i.useState)(!1),{apiPost:R}=(0,u.kL)(),{nameValidation:O,emailValidation:F,phoneValidation:L,passwordValidation:M,returnErrorTexts:I}=(0,u.V$)(),_=e=>{let l=[...m];l[e].isDropdownOpen=!m[e].isDropdownOpen,h(l)},z=e=>{let l=d.FH[e.value];console.log("options: ",l),q([...l]),g(e)},W=e=>{P([...d._I[e.value]]),T(e)},B=e=>{x(e)},V=e=>{let l=[...m];"Married"===e.value?l[p.anniversary].isInputHidden=!1:l[p.anniversary].isInputHidden=!0,h(l)},H=(e,l,r,a)=>{let i=[...m];i[l].isDropdownOpen=!1,i[l].value=e.label,i[l].error=null,"country"===a?z(e):"state"===a?W(e):"city"===a?B(e):"marital"===a&&V(e),h(i)},U=(e,l,r,a)=>{let i={...v};i[a]=l,f(i);let o=[...m];o[e].isDropdownOpen=r,console.log("options: ",i,r,e,o[e]),h(o)},A=(e,l)=>{let r=[];(null==e?void 0:e.length)&&e.length>1?(console.log("Val: ",e),C.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&r.push(l)}),(null==r?void 0:r.length)&&U(l,r,!0,"state")):e&&e.length||U(l,r,!1,"state")},G=(e,l)=>{let r=[];(null==e?void 0:e.length)&&e.length>1?(console.log("Val: ",e),E.forEach(l=>{l.label.toLowerCase().includes(e.toLowerCase())&&r.push(l)}),(null==r?void 0:r.length)&&U(l,r,!0,"city")):e&&e.length||U(l,r,!1,"city")},J=(e,l,r)=>{"state"===r?A(e,l):"city"===r&&G(e,l)},X=(e,l,r,a)=>{let i=[...m];i[l].value=e,i[l].error=null,a&&J(e,l,a),h(i)},K=(e,l)=>{let r=[...m];r[l].countryCode="+".concat(e.code),r[l].countryCodeValue=e.code,h(r)},Y=e=>{let l=[...m],r=m[e].isPasswordVisible;l[e].keyboardType=r?"password":"default",l[e].isPasswordVisible=!r,h(l)},Z=async()=>{let e=await O(m[p.name].value),r=await F(m[p.email].value),a=await L(m[p.phone].value),i=await M(m[p.password].value);if(e&&r&&i&&a&&l){var n,t,d;let e;N(!0);let r="".concat(s.kh.qfferAPI,"/customer/web/signUp/email/").concat(l),a=JSON.stringify({name:m[p.name].value,email:m[p.email].value.toLowerCase(),phone:"".concat(m[p.phone].countryCodeValue).concat(m[p.phone].value),password:m[p.password].value,deviceId:null,referralCode:m[p.referral].value?null===(n=m[p.referral].value)||void 0===n?void 0:n.toUpperCase():null,dateOfBirth:m[p.dob].value,address:m[p.address].value,gender:m[p.gender].value,state:m[p.state].value,city:m[p.city].value,country:m[p.country].value,maritalStatus:m[p.marital].value,anniversaryDate:m[p.anniversary].value,acceptChannelCommunications:m[p.checkBox].value});try{e=await R(r,a)}catch(e){j("Something went wrong! Please try again after some time."),N(!1)}(null===(t=e)||void 0===t?void 0:t.message)==="success"?(console.log("response: ",e),o(a)):(null===(d=e)||void 0===d?void 0:d.message)==="failure"&&e.body?j(e.body):j("Something went wrong! Please try again after some time."),N(!1)}else{let o=[...m];e||(o[p.name].error=await I(m[p.name].value,"name")),r||(o[p.email].error=await I(m[p.email].value,"email")),a||(o[p.phone].error=await I(m[p.phone].value,"phone")),i||(o[p.password].error=await I(m[p.password].value,"password")),l||j("This link seems to be expired or broken, Please try again with another link."),h(o)}},Q=()=>{let e=!0;return m.forEach(l=>{l.isRequired&&!l.value&&(e=!1)}),!e},$=(0,i.useMemo)(()=>Q(),[m]),ee=()=>{let e=[...m];e[p.referral].value=r,h([...e])};return(0,i.useEffect)(()=>{r&&ee()},[]),(0,a.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,a.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Create account"}),(0,a.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,a.jsxs)("div",{className:"row gy-3",children:[m.map((e,l)=>e.isInputHidden?null:(0,a.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:e.inputFieldType&&"SELECT_TYPE"===e.inputFieldType?(0,a.jsx)(n.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,inputAllowed:!0,options:v[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:_,onChange:X,onSelect:H}):e.inputFieldType&&"SELECT"===e.inputFieldType?(0,a.jsx)(n.jL,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:v[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:_,onChange:X,onSelect:H}):e.inputFieldType&&"PHONE"===e.inputFieldType?(0,a.jsx)(n.sb,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:K,onChange:X}):e.inputFieldType&&"MULTI_LINE"===e.inputFieldType?(0,a.jsx)(n.zC,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,isDisabled:e.isDisabled,onChange:X}):e.inputFieldType&&"CHECKBOX"===e.inputFieldType?(0,a.jsx)(n.Jg,{value:e.value,id:e.id,index:l,label:e.label,error:e.error,isDisabled:e.isDisabled,onChange:X}):(0,a.jsx)(n.Wz,{value:e.value,id:e.id,index:l,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:Y,onChange:X})},"input-".concat(l))),(null==k?void 0:k.length)?(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:k})}):null,(0,a.jsx)("div",{className:"col-lg-12",children:(0,a.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-end",children:(0,a.jsx)(t.K,{id:"qb-profile-btn",isDisabled:$,isLoading:D,onDisabledClick:()=>{let e=[...m];m.forEach((l,r)=>{l.isRequired&&!l.value&&(e[r].error=l.emptyErrorMessage?l.emptyErrorMessage:"Required field. Please fill this field to continue.")}),h([...e])},onClick:Z,children:(0,a.jsxs)(a.Fragment,{children:["Signup",(0,a.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})})]})})]})},h=r(5353),v=r(2539),f=r(9008),b=r.n(f),g=()=>{let[e,l]=(0,i.useState)("SIGNUP"),[r,n]=(0,i.useState)(null),[t,s]=(0,i.useState)(null),[d,p]=(0,i.useState)(null),[c,y]=(0,i.useState)(!1),{breakDownUrl:f}=(0,u.ZN)(),g=()=>{l("SIGNUP")},w=async()=>{let e=window.location.href,l=await f(e);l.queries&&l.queries.amx&&n(l.queries.amx),l.queries&&l.queries.ref&&s(l.queries.ref)};return(0,i.useEffect)(()=>{w()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b(),{children:(0,a.jsx)("title",{children:"Qffer | Signup"})}),(0,a.jsx)(o.Z,{children:"SIGNUP"===e?(0,a.jsx)(m,{storeId:r,referral:t,navigateToOtp:e=>{p(JSON.parse(e)),l("OTP")}}):(0,a.jsx)(h.Z,{authType:"SIGNUP",user:d,handleSuccess:()=>{g(),y(!0)}})}),(0,a.jsx)(v.Z,{isVisible:c,handleBackdropClick:()=>{y(!1)},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]})}}},function(e){e.O(0,[675,775,912,774,888,179],function(){return e(e.s=6700)}),_N_E=e.O()}]);