(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{6700:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return l(7322)}])},5494:function(e,a){"use strict";a.Z={src:"/_next/static/media/general.7095fc5d.png",height:506,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxUlEQVR42mPABX6UNDP+a21nhAt8K29n/5zTovGtqFX3Z207N1zieWgHE4j+mNtm/qG0x/N7cbPW9/JWh9/1bVJ/G9uEwYreJ7WJfMjvjXhX3Jn+PrvJ5H99P/+fhnaNP41tSgwvPKpE38R3ur0vnxT3oayt/ENVQ8WnjnLjX+2NKv+bujgZXgY0sL6JbBL8kNth+LmizfZLXaPdl+Zam58tDZIYLn9TO5X9TXs9O4z/pbUK4ou38W2MH9PyGVG82dIA5gMAcORU4v0N6lsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},6775:function(e,a,l){"use strict";var r=l(5893);l(7294);var i=l(511),n=l(5675),t=l.n(n),s=l(5494);a.Z=e=>{let{isVisible:a,handleBackdropClick:l,title:n,message:o}=e;return(0,r.jsx)(i.Z,{isVisible:a,handleBackdropClick:l,children:(0,r.jsxs)("div",{className:"w-100 p-5",children:[(0,r.jsx)("div",{className:"qb-popup-illustration-wrapper pb-3 w-100 d-flex align-items-center justify-content-center",children:(0,r.jsx)(t(),{src:s.Z,alt:"success",className:"qb-popup-illustration"})}),(0,r.jsx)("h3",{className:"qb-title mb-0 pb-3 pt-5",children:n}),(0,r.jsx)("p",{className:"qb-description mb-0 pb-4",children:o})]})})}},7322:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return P}});var r=l(5893),i=l(7294),n=l(9008),t=l.n(n),s=l(1163),o=l(8295),d=l(5775),u=l(6264),c=l(7953),p=l(9655),m=l(1664),h=l.n(m);let y={name:0,email:1,phone:2,dob:3,gender:4,marital:5,anniversary:6,referral:7,checkBox:8},b=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}],f=[{label:"Single",value:"Single"},{label:"Married",value:"Married"},{label:"Prefer not to answer/other",value:"Prefer not to answer/other"}],v={"Phone numer is registered with a different email":"01","Email is already present":"02","You are already signed up":"03","Form already submitted":"04"};var g=e=>{let{storeId:a,referral:l,navigateToOtp:n,loginUrl:t,redirectLink:s,handleRedirect:o}=e,[m,g]=(0,i.useState)([{label:"Name",fieldname:"name",placeholder:"John Doe",value:"",id:1,keyboardType:"default",error:null,isRequired:!0,emptyErrorMessage:"Name is required. Please provide your name.",inputWidthSize:"12"},{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Phone",fieldname:"phone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Phone number is required. Please provide your Phone number.",inputWidthSize:"12"},{label:"Date of birth",fieldname:"dob",placeholder:"dd/mm/yyyy",value:"",id:13,keyboardType:"date",error:null,isRequired:!1,emptyErrorMessage:"Date of birth is required. Please provide your birth date.",inputWidthSize:"6"},{label:"Gender",fieldname:"gender",placeholder:"Select",value:"",id:14,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"gender",emptyErrorMessage:"Gender is required. Please provide your gender.",inputWidthSize:"6"},{label:"Marital status",fieldname:"marital",placeholder:"Select",value:"",id:15,keyboardType:"default",error:null,isRequired:!1,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"marital",inputWidthSize:"6"},{label:"Anniversary date",fieldname:"anniversary",placeholder:"dd/mm/yyyy",value:"",id:16,keyboardType:"date",error:null,isRequired:!1,inputWidthSize:"6",isDisabled:!0},{label:"Referral code",fieldname:"referral",placeholder:"AXLTYD",value:"",id:6,keyboardType:"default",error:null,isRequired:!1},{label:"I agree to receive loyalty rewards, offers and updates via email and text.",value:!0,id:17,error:null,isRequired:!0,emptyErrorMessage:"Please agree to receive loyalty reward communications if you wish to signup to our loyalty program.",inputWidthSize:"12",inputFieldType:"CHECKBOX"}]),[w,x]=(0,i.useState)({country:c.Ju,state:[],city:[],gender:b,marital:f}),[q,S]=(0,i.useState)(null),[P,N]=(0,i.useState)(!1),[j,T]=(0,i.useState)(!1),{apiPost:C}=(0,p.kL)(),{nameValidation:E,emailValidation:k,phoneValidation:R,passwordValidation:A,returnErrorTexts:D}=(0,p.V$)(),L=e=>{let a=[...m];a[e].isDropdownOpen=!m[e].isDropdownOpen,g(a)},U=e=>{let a=[...m];"Married"===e.value?a[y.anniversary].isDisabled=!1:(a[y.anniversary].isDisabled=!0,a[y.anniversary].value=""),g(a)},O=(e,a,l,r)=>{let i=[...m];i[a].isDropdownOpen=!1,i[a].value=e.label,i[a].error=null,"marital"===r&&U(e),g(i)},z=(e,a)=>{let l=[...m];l[a].value=e,l[a].error=null,g(l)},I=(e,a)=>{let l=[...m];l[a].countryCode="+".concat(e.code),l[a].countryCodeValue=e.code,g(l)},F=e=>{let a=[...m],l=m[e].isPasswordVisible;a[e].keyboardType=l?"password":"default",a[e].isPasswordVisible=!l,g(a)},M=async()=>{let e=await E(m[y.name].value),l=await k(m[y.email].value),r=await R(m[y.phone].value);if(e&&l&&r&&a){var i,t,s;let e;N(!0);let l="".concat(c.kh.qfferAPI,"/customer/web/signUp/email/").concat(a),r=JSON.stringify({name:m[y.name].value,email:m[y.email].value.toLowerCase(),phone:"".concat(m[y.phone].countryCodeValue).concat(m[y.phone].value),deviceId:null,referralCode:m[y.referral].value?null===(i=m[y.referral].value)||void 0===i?void 0:i.toUpperCase():null,dateOfBirth:m[y.dob].value,gender:m[y.gender].value,maritalStatus:m[y.marital].value,anniversaryDate:m[y.anniversary].value,acceptChannelCommunications:m[y.checkBox].value});try{e=await C(l,r)}catch(e){S("Something went wrong! Please try again after some time."),N(!1)}(null===(t=e)||void 0===t?void 0:t.message)==="success"?n(r,e.body):(null===(s=e)||void 0===s?void 0:s.message)==="failure"&&e.body?(v[e.body]&&T(!0),S(e.body)):S("Something went wrong! Please try again after some time."),N(!1)}else{let i=[...m];e||(i[y.name].error=await D(m[y.name].value,"name")),l||(i[y.email].error=await D(m[y.email].value,"email")),r||(i[y.phone].error=await D(m[y.phone].value,"phone")),a||S("This link seems to be expired or broken, Please try again with another link."),g(i)}},V=()=>{let e=!0;return m.forEach(a=>{a.isRequired&&!a.value&&(e=!1)}),!e},W=(0,i.useMemo)(()=>V(),[m]),_=()=>{let e=[...m];e[y.referral].value=l,g([...e])};return(0,i.useEffect)(()=>{l&&_()},[l]),(0,r.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",onSubmit:e=>{e.preventDefault()},children:[(0,r.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Create account"}),(0,r.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,r.jsxs)("div",{className:"row gy-3",children:[m.map((e,a)=>e.isInputHidden?null:(0,r.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:e.inputFieldType&&"SELECT"===e.inputFieldType?(0,r.jsx)(d.jL,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:w[e.selectBoxType],isDropdownOpen:e.isDropdownOpen,onClick:L,onChange:z,onSelect:O}):e.inputFieldType&&"PHONE"===e.inputFieldType?(0,r.jsx)(d.sb,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:I,onChange:z}):e.inputFieldType&&"MULTI_LINE"===e.inputFieldType?(0,r.jsx)(d.zC,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,isDisabled:e.isDisabled,onChange:z}):e.inputFieldType&&"CHECKBOX"===e.inputFieldType?(0,r.jsx)(d.Jg,{value:e.value,id:e.id,index:a,label:e.label,error:e.error,isDisabled:e.isDisabled,onChange:z}):(0,r.jsx)(d.Wz,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:F,onChange:z})},"input-".concat(a))),(null==q?void 0:q.length)?(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:q})}):null,(0,r.jsx)("div",{className:"col-lg-12",children:(0,r.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex flex-column flex-md-row align-items-stretch align-items-md-center justify-content-end",children:(0,r.jsx)(u.K,{id:"qb-profile-btn",isDisabled:W,isLoading:P,onDisabledClick:()=>{let e=[...m];m.forEach((a,l)=>{a.isRequired&&!a.value&&(e[l].error=a.emptyErrorMessage?a.emptyErrorMessage:"Required field. Please fill this field to continue.")}),g([...e])},onClick:M,children:(0,r.jsxs)(r.Fragment,{children:["Signup",(0,r.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"w-100 flex-column align-items-center align-items-md-end d-flex",children:j&&s?(0,r.jsxs)("p",{className:"qb-description",children:["Already signed up? ",(0,r.jsx)("a",{onClick:o,className:"qb-link",children:"Visit shop page"})]}):t?(0,r.jsxs)("p",{className:"qb-description",children:["Already have an account? ",(0,r.jsx)(h(),{href:t,className:"qb-link",children:"Login"})]}):null})})]})})]})},w=l(5353),x=l(2539),q=l(6775),S=l(6835),P=()=>{let[e,a]=(0,i.useState)("SIGNUP"),[l,n]=(0,i.useState)(null),[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),[y,b]=(0,i.useState)(""),[f,v]=(0,i.useState)(null),[P,N]=(0,i.useState)(!1),[j,T]=(0,i.useState)(null),[C,E]=(0,i.useState)(null),[k,R]=(0,i.useState)(!1),[A,D]=(0,i.useState)(!1),[L,U]=(0,i.useState)(null),{breakDownUrl:O}=(0,p.ZN)(),{apiGet:z}=(0,p.kL)(),I=(0,s.useRouter)(),F=async e=>{let a=RegExp("^([a-zA-Z]+:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return a.test(e)},M=()=>{a("SIGNUP")},V=async e=>{let a=null!=e&&!!e.redirectURL&&await F(e.redirectURL);a&&!e.redirectURL.includes("login")?window.location.href=e.redirectURL:(a&&(null==e?void 0:e.redirectURL)&&T(e.redirectURL),M(),N(!0))},W=e=>{let a="/auth/login";if(e.queries){let l;let r=0;for(l in e.queries)a="".concat(a).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),r++}b(a)},_=async e=>{let a,l="".concat(c.kh.qfferAPI,"/customer/web/signUp/email/store-info/").concat(e);try{return a=await z(l)}catch(e){return a}},Z=(e,a)=>{E({title:e,message:a}),R(!0)},B=async e=>{var a;let l=await _(e);if(l&&"success"===l.message&&l.body){let e=!1;(null===(a=l.body.platform)||void 0===a?void 0:a.toLowerCase())==="qffer"&&(e=!0),u(e),D(!0),U(l.body);let r=!!l.body.redirectURL&&await F(l.body.redirectURL);r&&l.body.redirectType&&"SHOP_URL"===l.body.redirectType&&T(l.body.redirectURL)}else(null==l?void 0:l.message)&&"failure"===l.message&&l.body&&"Something went wrong"!=l.body?setTimeout(()=>{Z("Invalid link",l.body)},300):setTimeout(()=>{Z("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300)},G=async()=>{let e=window.location.href,a=await O(e);W(a),a.queries&&a.queries.amx&&(B(a.queries.amx),n(a.queries.amx)),a.queries&&a.queries.ref&&h(a.queries.ref)};return(0,i.useEffect)(()=>{G()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t(),{children:(0,r.jsx)("title",{children:"Qffer | Signup"})}),A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{type:d?"QFFER":"GENERIC",logo:null==L?void 0:L.logo,brandColor:null==L?void 0:L.brandColor,children:"SIGNUP"===e?(0,r.jsx)(g,{storeId:l,referral:m,navigateToOtp:e=>{v(JSON.parse(e)),a("OTP")},loginUrl:y,redirectLink:j,handleRedirect:()=>{j&&(window.location.href=j)}}):(0,r.jsx)(w.Z,{authType:"SIGNUP",user:f,handleSuccess:V,storeId:l})}),(0,r.jsx)(x.Z,{isVisible:P,handleBackdropClick:()=>{N(!1),j?window.location.href=j:I.push(y)},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way. ".concat(d?" Download Qffer and make use of full extend of Qffer services today.":""),isQffer:d})]}):(0,r.jsx)(S.Z,{removePreloader:A,loaderType:"GENERIC"}),(0,r.jsx)(q.Z,{isVisible:k,handleBackdropClick:()=>{},title:null==C?void 0:C.title,message:null==C?void 0:C.message})]})}}},function(e){e.O(0,[664,775,164,774,888,179],function(){return e(e.s=6700)}),_N_E=e.O()}]);