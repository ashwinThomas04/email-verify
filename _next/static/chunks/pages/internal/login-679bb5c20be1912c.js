(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7337],{5644:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/internal/login",function(){return i(8141)}])},8141:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return f}});var l=i(5893),a=i(8295),r=i(7294),n=i(3439),d=i(6264),o=i(5202),t=i(9655);let u={email:0,password:1};var c=e=>{let{handleSuccess:s}=e,[i,a]=(0,r.useState)([{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"}]),[c,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),{apiPost:f}=(0,t.kL)(),{emailValidation:w,passwordValidation:g,returnErrorTexts:b}=(0,t.V$)(),v=(e,s)=>{let l=[...i];l[s].value=e,l[s].error=null,a(l)},y=e=>{let s=[...i],l=i[e].isPasswordVisible;s[e].keyboardType=l?"password":"default",s[e].isPasswordVisible=!l,a(s)},x=async()=>{let e=await w(i[u.email].value);if(e){var l,r,n,d;let e;m(null),h(!0);let a="".concat(o.kh.qfferAPI,"/internal/1/signIn"),t=JSON.stringify({email:i[u.email].value.toLowerCase(),password:i[u.password].value});try{e=await f(a,t)}catch(e){m("Something went wrong! Please try again after some time."),h(!1)}(null===(l=e)||void 0===l?void 0:l.message)&&(null===(r=e)||void 0===r?void 0:r.message.toLowerCase())==="success"?s(e.body):((null===(n=e)||void 0===n?void 0:n.message)&&(null===(d=e)||void 0===d?void 0:d.message.toLowerCase())==="failure"&&e.body?m(e.body):m("Something went wrong! Please try again after some time."),h(!1))}else{let s=[...i];e||(s[u.email].error=await b(i[u.email].value,"email")),a(s)}},j=()=>{let e=!0;return i.forEach(s=>{s.isRequired&&!s.value&&(e=!1)}),!e},q=(0,r.useMemo)(()=>j(),[i]);return(0,l.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,l.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Login"}),(0,l.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,l.jsxs)("div",{className:"row gy-3",children:[i.map((e,s)=>e.isInputHidden?null:(0,l.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:(0,l.jsx)(n.Wz,{value:e.value,id:e.id,index:s,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:y,onChange:v})},"input-".concat(s))),(null==c?void 0:c.length)?(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:c})}):null,(0,l.jsx)("div",{className:"col-lg-12",children:(0,l.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex align-items-center justify-content-end",children:(0,l.jsx)("div",{className:"d-flex",children:(0,l.jsx)(d.K,{id:"qb-profile-btn",isDisabled:q,isLoading:p,onDisabledClick:()=>{let e=[...i];i.forEach((s,i)=>{s.isRequired&&!s.value&&(e[i].error=s.emptyErrorMessage?s.emptyErrorMessage:"Required field. Please fill this field to continue.")}),a([...e])},onClick:x,children:(0,l.jsxs)(l.Fragment,{children:["Login",(0,l.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})})})]})})]})},m=i(3553),p=i(9008),h=i.n(p),f=()=>{let{updateInternalUserStorageData:e}=(0,m.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h(),{children:(0,l.jsx)("title",{children:"Qffer | Login"})}),(0,l.jsx)(a.Z,{type:"QFFER",children:(0,l.jsx)(c,{handleSuccess:s=>{e(s),window.location.href="/internal/stores?type=pending"}})})]})}}},function(e){e.O(0,[3439,6211,9774,2888,179],function(){return e(e.s=5644)}),_N_E=e.O()}]);