(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{1755:function(e,a,l){"use strict";var s=l(7294),i=s&&"object"==typeof s&&"default"in s?s.default:s,n=null,o=null,t=function(e,a){e.origin==a&&"object"!=typeof e.data&&(window.location.search=""+e.data)},r=["className","partnerId","callback","requestedNumber","label","env","queryParameters"];a.ConnectButton=function(e){var a=e.className,l=e.partnerId,c=e.callback,d=e.requestedNumber,m=e.label,h=void 0===m?"Connect 360dialog":m,u=e.env,p=void 0===u?"prod":u,b=e.queryParameters,f=function(e,a){if(null==e)return{};var l,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)a.indexOf(l=n[s])>=0||(i[l]=e[l]);return i}(e,r),x=s.useState(""),g=x[0],v=x[1],N=function(e,a){var l=RegExp("[\\?&]"+(a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)").exec(e);return null===l?"":decodeURIComponent(l[1].replace(/\+/g," "))};return s.useEffect(function(){v(function(){var e=("local"===p?"http://0.0.0.0:8082":"staging"===p&&"https://admin.hub-staging.360dialog.io")||"rc"===p&&"https://rc-admin.360dialog.io"||"https://hub.360dialog.com",a=d?e+"/dashboard/app/"+l+"/permissions?number="+d:e+"/dashboard/app/"+l+"/permissions";if(b){var s=Object.values(b).map(function(e){return e?encodeURIComponent(e):""});s&&Object.keys(b).forEach(function(e,l){a=0!==l||d?a+"&"+e+"="+s[l]:a+"?"+e+"="+s[l]})}return a}())},[p,d,b]),s.useEffect(function(){var e=window.location.search,a=N(e,"client"),l=N(e,"channels"),s=N(e,"revoked");if(a&&l){var i={client:a,channels:l.substring(1,l.length-1).split(",")};if(s){var n=s.substring(1,s.length-1).split(",");i.revokedChannels=n}c(i)}window.opener&&(window.opener.postMessage(e),window.close())},[]),i.createElement("button",Object.assign({className:a||"360dialog-connect-button",onClick:function(){var e,a,l;return e="connect-360dialog",a=window.location.origin,window.removeEventListener("message",t),l="toolbar=no, menubar=no, width=600, height=900, top=100, left=100",void(null===n||n.closed?n=window.open(g,e,l):o!==g?(n=window.open(g,e,l)).focus():n.focus(),window.addEventListener("message",function(e){return t(e,a)},!1),o=g)}},f),h)}},9540:function(e,a,l){"use strict";e.exports=l(1755)},5479:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/internal/store/detail",function(){return l(3600)}])},3600:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return w}});var s=l(5893),i=l(7294),n=l(172),o=l(6264),t=l(381),r=l.n(t),c=l(5202),d=l(9540),m=l(5675),h=l.n(m),u=l(2838),p=e=>{let{data:a,onStatusChange:l,onEditClick:n,handle360Callback:t,isWhatsappConnected:m}=e,[p,b]=(0,i.useState)(null),{internalUser:f}=(0,u.ZP)(),x=()=>{b(JSON.parse(a.addressLocationJson))};return(0,i.useEffect)(()=>{(null==a?void 0:a.addressLocationJson)&&x()},[a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"d-flex flex-column flex-xl-row align-items-stretch align-items-xl-end pb-3 pb-lg-4 justify-content-between",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("div",{className:"qb-i-store-logo-wrap position-relative d-none d-sm-flex",children:a.logoUrl?(0,s.jsx)(h(),{src:a.logoUrl,fill:!0,alt:"store logo",className:"qb-i-store-logo"}):null}),(0,s.jsxs)("div",{className:"ps-3",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("h1",{className:"mb-0 qb-i-store-name",children:a.storeName?a.storeName:"- -"}),(0,s.jsx)("div",{className:"d-none d-md-flex ps-md-2",children:a.isQfferEnabled&&a.isStoreReviewDone?(0,s.jsx)("div",{className:"qb-i-store-status-badge qb-i-store-status-active",children:"Active"}):(0,s.jsx)("div",{className:"qb-i-store-status-badge",children:"Inactive"})})]}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-tags pb-2 pb-md-0",children:a.chainTags?a.chainTags:"- -"}),(0,s.jsx)("div",{className:"d-flex d-md-none",children:a.isQfferEnabled&&a.isStoreReviewDone?(0,s.jsx)("div",{className:"qb-i-store-status-badge qb-i-store-status-active",children:"Active"}):(0,s.jsx)("div",{className:"qb-i-store-status-badge",children:"Inactive"})})]})]}),(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-end pt-3 pt-md-none",children:[(null==f?void 0:f.isSuper)&&!m?(0,s.jsx)("div",{className:"pe-2 pe-md-3 qb-360-btn-wrapper",children:(0,s.jsx)(d.ConnectButton,{partnerId:c.kh.partnerId360,callback:t,label:"Connect Whatsapp"})}):null,(0,s.jsx)("div",{className:"pe-1 pe-md-2",children:(0,s.jsx)(o.g,{onClick:n,children:"Edit"})}),(0,s.jsx)("div",{className:"ps-1 ps-md-2",children:(0,s.jsx)(o.K,{onClick:()=>{let e=a.isQfferEnabled&&a.isStoreReviewDone?"deactivate":"activate";l(a.storeId,a.storeName,e)},children:a.isQfferEnabled&&a.isStoreReviewDone?"Deactivate":"Activate"})})]})]}),(0,s.jsx)("div",{className:"qb-basic-card-wrap p-3 p-lg-4 d-flex flex-column",children:(0,s.jsx)("div",{className:"contianer-fluid px-0 py-3",children:(0,s.jsxs)("div",{className:"row gx-4 gy-4",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title",children:"Basic"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Store since"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.createdAt?r()(a.createdAt).format("DD, MMM, YY, hh:mm a"):"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Category"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainCategory&&c.kh.storeCategories[a.chainCategory]?c.kh.storeCategories[a.chainCategory]:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6 col-xl-8",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Tags"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainTags?a.chainTags:"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title",children:"Chain Details"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainName?a.chainName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Email"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainEmail?a.chainEmail:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Phone Number"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainManagerPhone?"+".concat(a.chainManagerPhone):"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title pt-3 pt-lg-4",children:"Store Details"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeName?a.storeName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Email"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeEmail?a.storeEmail:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Manager Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeManagerName?a.storeManagerName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Phone Number"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeManagerPhone?"+".concat(a.storeManagerPhone):"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Short Location"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:(null==p?void 0:p.shortLocation)?p.shortLocation:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-lg-9",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Address"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.locationDescription?a.locationDescription:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-xl-10",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Google Map Link"}),(null==p?void 0:p.locationUrl)?(0,s.jsxs)("a",{href:p.locationUrl,target:"_blank",rel:"noopener noreferrer",className:"mb-0 qb-i-store-info-link d-flex align-items-center",children:[(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc pe-1",children:p.locationUrl}),(0,s.jsx)("div",{children:(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M13.5 9.75V14.25C13.5 14.6478 13.342 15.0294 13.0607 15.3107C12.7794 15.592 12.3978 15.75 12 15.75H3.75C3.35218 15.75 2.97064 15.592 2.68934 15.3107C2.40804 15.0294 2.25 14.6478 2.25 14.25V6C2.25 5.60218 2.40804 5.22064 2.68934 4.93934C2.97064 4.65804 3.35218 4.5 3.75 4.5H8.25M11.25 2.25H15.75M15.75 2.25V6.75M15.75 2.25L7.5 10.5",stroke:"#090A0A","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})})})]}):(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc pe-1",children:"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title pt-3 pt-lg-4",children:"Branding Details"})}),(0,s.jsx)("div",{className:"col-8 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Logo"}),(0,s.jsx)("div",{className:"qb-i-store-info-logo-wrap position-relative",children:a.logoUrl?(0,s.jsx)(h(),{src:a.logoUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})}),(0,s.jsx)("div",{className:"col-12 col-md-8 col-lg-6 col-xl-4",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Store front display image"}),(0,s.jsx)("div",{className:"qb-i-store-info-thumbnail-wrap position-relative",children:a.shopThumbnailUrl?(0,s.jsx)(h(),{src:a.shopThumbnailUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})}),(0,s.jsx)("div",{className:"col-6 col-md-3 col-lg-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"UPI QR code"}),(0,s.jsx)("div",{className:"qb-i-store-info-logo-wrap position-relative",children:a.upiQRCodeUrl?(0,s.jsx)(h(),{src:a.upiQRCodeUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})})]})})})]})},b=l(9218),f=l(511),x=l(3439);let g={chainName:0,chainCategory:1,chainEmail:2,chainManagerPhone:3,storeName:4,storeEmail:5,storeManagerPhone:6,storeManagerName:7};var v=e=>{let{isVisible:a,handleBackdropClick:l,store:n,handleUpdation:t}=e,{internalUser:r}=(0,u.ZP)(),[d,m]=(0,i.useState)([{label:"Chain Name",fieldname:"chainName",placeholder:"Abbot Industries",value:"",id:1,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Chain name is required. Please provide your chain name.",inputWidthSize:"6"},{label:"Category",fieldname:"chainCategory",placeholder:"Select",value:"",id:5,keyboardType:"text",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"category",emptyErrorMessage:"Category is required. Please select your category.",inputWidthSize:"6"},{label:"Chain Email",fieldname:"chainEmail",placeholder:"support@abbot.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Chain email is required. Please provide your chain email address.",inputWidthSize:"6"},{label:"Chain Phone",fieldname:"chainManagerPhone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Chain phone number is required. Please provide your chain phone number.",inputWidthSize:"6"},{label:"Store Name",fieldname:"storeName",placeholder:"Abbot Tech",value:"",id:4,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Store name is required. Please provide your store name.",inputWidthSize:"6"},{label:"Store Email",fieldname:"storeEmail",placeholder:"tech@abbot.com",value:"",id:6,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Store email is required. Please provide your chain email address.",inputWidthSize:"6"},{label:"Store Phone",fieldname:"storeManagerPhone",placeholder:"999 999 9999",value:"",id:7,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Store phone number is required. Please provide your store phone number.",inputWidthSize:"6"},{label:"Manager Name",fieldname:"storeManagerName",placeholder:"John Doe",value:"",id:8,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Manager name is required. Please provide your manager name.",inputWidthSize:"6"}]),[h,p]=(0,i.useState)(null),[b,v]=(0,i.useState)(!1),[N,j]=(0,i.useState)([]),[y,q]=(0,i.useState)(null),w=(e,a)=>{let l=[...d];l[a].value=e,l[a].error=null,m(l)},C=(e,a)=>{let l=[...d];l[a].countryCode="+".concat(e.code),l[a].countryCodeValue=e.code,m(l)},P=()=>{let e={};return[...d].forEach(a=>{"chainCategory"!=a.fieldname&&"chainManagerPhone"!=a.fieldname&&"storeManagerPhone"!=a.fieldname&&a.value!=n[a.fieldname]&&(e[a.fieldname]=a.value)}),e},E=async()=>{let e=P(),a={chainId:n.chainId,chainCategory:y.value,storeId:n.storeId,isQfferEnabled:n.isQfferEnabled,isStoreReviewDone:n.isStoreReviewDone};t({...e,...a})},M=e=>{let a=[...d];a[e].isDropdownOpen=!d[e].isDropdownOpen,m(a)},k=(e,a,l,s)=>{let i=[...d];i[a].isDropdownOpen=!1,i[a].value=e.label,i[a].error=null,"category"===s&&q(e),m(i)},S=()=>{let e=n.chainManagerPhone?n.chainManagerPhone.slice(1):"",a=n.chainManagerPhone?n.chainManagerPhone.slice(0,1):"91",l=n.storeManagerPhone?n.storeManagerPhone.slice(1):"",s=n.storeManagerPhone?n.storeManagerPhone.slice(0,1):"91";1!=a&&(e=n.chainManagerPhone?n.chainManagerPhone.slice(2):"",a=n.chainManagerPhone?n.chainManagerPhone.slice(0,2):"91"),1!=s&&(l=n.storeManagerPhone?n.storeManagerPhone.slice(2):"",s=n.storeManagerPhone?n.storeManagerPhone.slice(0,2):"91");let i=[...d],o=n.chainCategory?{label:c.kh.storeCategories[n.chainCategory],value:n.chainCategory}:null;i[g.chainName].value=n.chainName,i[g.chainCategory].value=o?o.label:"",i[g.chainManagerPhone].value=e,i[g.chainManagerPhone].countryCode="+".concat(a),i[g.chainManagerPhone].countryCodeValue=a,i[g.chainManagerPhone].isDisabled=!!e,i[g.chainEmail].value=n.chainEmail,i[g.chainEmail].isDisabled=!!n.chainEmail,i[g.storeName].value=n.storeName,i[g.storeManagerName].value=n.storeManagerName,i[g.storeManagerPhone].value=l,i[g.storeManagerPhone].countryCode="+".concat(s),i[g.storeManagerPhone].countryCodeValue=s,i[g.storeManagerPhone].isDisabled=!!l,i[g.storeEmail].value=n.storeEmail,i[g.storeEmail].isDisabled=!!n.storeEmail,q(o),m(i)},R=()=>{let e,a=[];for(e in c.kh.storeCategories)a.push({label:c.kh.storeCategories[e],value:e});j(a)},T=()=>{let e=!0;return d.forEach(a=>{a.isRequired&&!a.value&&(e=!1)}),!e},D=(0,i.useMemo)(()=>T(),[d]);return(0,i.useEffect)(()=>{a&&(S(),R())},[a]),(0,s.jsx)(f.Z,{isVisible:a,handleBackdropClick:l,isLarge:!0,children:(0,s.jsxs)("div",{className:"w-100 p-5 d-flex flex-column position-relative qb-store-update-modal",children:[(0,s.jsx)("div",{className:"qb-close-btn-wrap position-absolute d-flex align-items-center justify-content-center",onClick:l,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.55806 4.55806C4.80214 4.31398 5.19786 4.31398 5.44194 4.55806L10 9.11612L14.5581 4.55806C14.8021 4.31398 15.1979 4.31398 15.4419 4.55806C15.686 4.80214 15.686 5.19786 15.4419 5.44194L10.8839 10L15.4419 14.5581C15.686 14.8021 15.686 15.1979 15.4419 15.4419C15.1979 15.686 14.8021 15.686 14.5581 15.4419L10 10.8839L5.44194 15.4419C5.19786 15.686 4.80214 15.686 4.55806 15.4419C4.31398 15.1979 4.31398 14.8021 4.55806 14.5581L9.11612 10L4.55806 5.44194C4.31398 5.19786 4.31398 4.80214 4.55806 4.55806Z",fill:"#080A0A"})})}),(0,s.jsx)("div",{className:"container-fluid px-0 qb-store-modal-overflow-wrapper",children:(0,s.jsxs)("div",{className:"row gy-3",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h3",{className:"qb-title mb-0 pb-2",children:"Edit details"})}),d.map((e,a)=>e.isInputHidden?null:(0,s.jsx)("div",{className:"col-12 col-lg-6",children:e.inputFieldType&&"PHONE"===e.inputFieldType?(0,s.jsx)(x.sb,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:C,onChange:w}):e.inputFieldType&&"SELECT"===e.inputFieldType?(0,s.jsx)(x.jL,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:N,isDropdownOpen:e.isDropdownOpen,onClick:M,onChange:w,onSelect:k}):(0,s.jsx)(x.Wz,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onChange:w})},"input-".concat(a))),(null==h?void 0:h.length)?(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:h})}):null,(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"w-100 d-flex flex-column align-items-end pt-4",children:(0,s.jsx)(o.g,{isDisabled:D,isLoading:b,onDisabledClick:()=>{let e=[...d];d.forEach((a,l)=>{a.isRequired&&!a.value&&(e[l].error=a.emptyErrorMessage?a.emptyErrorMessage:"Required field. Please fill this field to continue.")}),m([...e])},onClick:E,children:(0,s.jsxs)(s.Fragment,{children:["Update",(0,s.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})})]})})]})})},N=l(9655),j=l(1096),y=l(9585),q=l(2388),w=()=>{let[e,a]=(0,i.useState)(null),[l,o]=(0,i.useState)(!0),[t,r]=(0,i.useState)(null),[d,m]=(0,i.useState)(!1),[f,x]=(0,i.useState)({title:"",message:"",btnText:""}),[g,w]=(0,i.useState)(!1),[C,P]=(0,i.useState)(!1),{internalUser:E}=(0,u.ZP)(),{apiPut:M,apiGet:k,apiPost:S}=(0,N.kL)(),{triggerToast:R}=(0,j.ZP)(),{getUrlQueries:T}=(0,N.ZN)(),D=()=>{m(!1)},I=()=>{P(!1)},O=async(e,l,s)=>{var i;let n;o(!0);let t="".concat(c.kh.qfferAPI,"/internal/1/store/details/").concat(e),r=JSON.stringify({storeId:e,isQfferEnabled:"activate"===s,isStoreReviewDone:"activate"===s});try{n=await M(t,r,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(i=n)||void 0===i?void 0:i.message)&&"success"===n.message?(R("Store ".concat("activate"===s?"Activated":"Deactivated"),"Yaay! ".concat(l," has been successfully ").concat("activate"===s?"activated":"deactivated","."),"SUCCESS"),a(n.body)):R("".concat("activate"===s?"Activation":"Deactivation"," failed"),"Oops! we were not able to ".concat("activate"===s?"activate":"deactivate"," ").concat(l," due to some glitch."),"ERROR"),o(!1)},L=async l=>{var s;let i;I(),o(!0);let n="".concat(c.kh.qfferAPI,"/internal/1/store/details/").concat(e.storeId),t=JSON.stringify(l);try{i=await M(n,t,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(s=i)||void 0===s?void 0:s.message)&&"success"===i.message?(R("Details updated","Yaay! ".concat(e.storeName," details have been updated successfully."),"SUCCESS"),a(i.body)):R("Updation Failed","Oops! we were unable to update the details for ".concat(e.storeName,"."),"ERROR"),o(!1)},A=async e=>{var l,s;let i;let n=e?Number(e):t;o(!0);let d="".concat(c.kh.qfferAPI,"/internal/1/store/details/").concat(n);try{i=await k(d,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(l=i)||void 0===l?void 0:l.message)&&"success"===i.message&&(null===(s=i)||void 0===s?void 0:s.body)&&(a(i.body),r(i.body.storeId)),o(!1)},U=async()=>{let e=await T(window.location.href);(null==e?void 0:e.id)?(A(e.id),_()):window.location.href="/internal/stores?type=pending"},W=async a=>{var l;let s;o(!0),console.log("client ID: "+a.client),console.log("channel IDs: "+a.channels);let i="".concat(c.kh.qfferAPI,"/whatsapp/onboarding?merchantId=").concat(e.chainId),n=JSON.stringify({channelId:a.channels,clientId:a.client});try{s=await S(i,n,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e)}(null===(l=s)||void 0===l?void 0:l.message)&&"success"===s.message?(w(!0),R("Whatsapp connected","Yaay! whatsapp communication connection for ".concat(e.storeName," has been successful."),"SUCCESS")):R("Whatsapp connection failed","Oops! whatsapp communication connection failed for ".concat(e.storeName,"."),"ERROR"),o(!1)},_=async()=>{var a;let l;let s="".concat(c.kh.qfferAPI,"/whatsapp/isOnboarded?merchantId=").concat(e.chainId);try{l=await k(s,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e)}(null===(a=l)||void 0===a?void 0:a.message)&&"success"===l.message&&l.body&&w(!0)};return(0,i.useEffect)(()=>{E&&U()},[E]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{children:l?(0,s.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center qb-internal-store-content-min-height",children:(0,s.jsx)(y.Z,{})}):e?(0,s.jsx)("div",{className:"qb-page-overflow-wrapper qb-internal-store-detail-wrap",children:(0,s.jsx)("div",{className:"qb-page-scroll-container",children:(0,s.jsx)("div",{className:"px-4 px-lg-5 py-4 py-lg-5 d-flex flex-column",children:(0,s.jsx)(p,{data:e,onStatusChange:(e,a,l)=>{x({title:"Confirm ".concat("activate"===l?"Activation":"Deactivation"),message:"Are you sure you want to change the activation status of ".concat(a," to ").concat("activate"===l?"active":"inactive","?"),btnText:"".concat("activate"===l?"Activate":"Deactivate"),id:e,name:a,type:l}),m(!0)},onEditClick:()=>{P(!0)},handle360Callback:W,isWhatsappConnected:g})})})}):(0,s.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,s.jsx)(h(),{src:q.Z,alt:"empty",className:"qb-empty-illustration"}),(0,s.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find the store details for you."})]})}),(0,s.jsx)(b.Z,{isVisible:d,title:null==f?void 0:f.title,message:null==f?void 0:f.message,btnText:null==f?void 0:f.btnText,btnAction:()=>{let{id:e,name:a,type:l}=f;O(e,a,l),D()},handleBackdropClick:D}),(0,s.jsx)(v,{isVisible:C,handleBackdropClick:I,store:e,handleUpdation:L})]})}}},function(e){e.O(0,[4885,3439,1007,9774,2888,179],function(){return e(e.s=5479)}),_N_E=e.O()}]);