(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{5479:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/internal/store/detail",function(){return l(3600)}])},1499:function(e,a,l){"use strict";l.d(a,{N:function(){return r}});var s=l(5893),i=l(7294);let n=null,o=null,t=(e,a,l,s)=>{window.removeEventListener("message",c);let i="toolbar=no, menubar=no, width=600, height=900, top=100, left=100";null===n||n.closed?n=window.open(e,a,i):o!==e?(n=window.open(e,a,i)).focus():n.focus(),window.addEventListener("message",e=>s(e,l),!1),o=e},c=(e,a)=>{let l=window.location.search;if(l&&(l=l.split("?")[1]),console.log("params: ",l),e.origin!=a||"object"==typeof e.data)return;let{data:s}=e,i="".concat(s).concat(l?"&".concat(l):"");console.log("params: ",i),window.location.search=i};var r=e=>{let{className:a,partnerId:l,callback:n,requestedNumber:o,label:c="Connect 360dialog",env:r="prod",queryParameters:d,...h}=e,[m,u]=(0,i.useState)(""),p=()=>{let e="local"===r&&"http://0.0.0.0:8082"||"staging"===r&&"https://admin.hub-staging.360dialog.io"||"rc"===r&&"https://rc-admin.360dialog.io"||"https://hub.360dialog.com",a=o?"".concat(e,"/dashboard/app/").concat(l,"/permissions?number=").concat(o):"".concat(e,"/dashboard/app/").concat(l,"/permissions");if(d){let e=Object.values(d),l=e.map(e=>e?encodeURIComponent(e):"");l&&Object.keys(d).forEach((e,s)=>{0!==s||o?a+="&".concat(e,"=").concat(l[s]):a+="?".concat(e,"=").concat(l[s])})}return a},b=(e,a)=>{var l=RegExp("[\\?&]"+(a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)").exec(e);return null===l?"":decodeURIComponent(l[1].replace(/\+/g," "))};(0,i.useEffect)(()=>{let e=p();u(e)},[r,o,d]),(0,i.useEffect)(()=>{let e=window.location.search,a=b(e,"client"),l=b(e,"channels"),s=b(e,"revoked");if(a&&l){let e=l.substring(1,l.length-1).split(","),i={client:a,channels:e};if(s){let e=s.substring(1,s.length-1).split(",");i.revokedChannels=e}n(i)}window.opener&&(window.opener.postMessage(e),console.log("Params:",e),window.close())},[]);let g=e=>{let{data:a}=e,l=b(a,"client"),s=b(a,"channels"),i=b(a,"revoked");if(l&&s){let e=s.substring(1,s.length-1).split(","),a={client:l,channels:e};if(i){let e=i.substring(1,i.length-1).split(",");a.revokedChannels=e}n(a)}};return(0,s.jsx)("button",{className:a||"360dialog-connect-button",onClick:()=>{t(m,"connect-360dialog",window.location.origin,g)},...h,children:c})}},3600:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return q}});var s=l(5893),i=l(7294),n=l(172),o=l(6264),t=l(381),c=l.n(t),r=l(5202),d=l(1499),h=l(5675),m=l.n(h),u=l(2838),p=e=>{let{data:a,onStatusChange:l,onEditClick:n,handle360Callback:t,isWhatsappConnected:h}=e,[p,b]=(0,i.useState)(null),{internalUser:g}=(0,u.ZP)(),x=()=>{b(JSON.parse(a.addressLocationJson))};return(0,i.useEffect)(()=>{(null==a?void 0:a.addressLocationJson)&&x()},[a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"d-flex flex-column flex-xl-row align-items-stretch align-items-xl-end pb-3 pb-lg-4 justify-content-between",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("div",{className:"qb-i-store-logo-wrap position-relative d-none d-sm-flex",children:a.logoUrl?(0,s.jsx)(m(),{src:a.logoUrl,fill:!0,alt:"store logo",className:"qb-i-store-logo"}):null}),(0,s.jsxs)("div",{className:"ps-3",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("h1",{className:"mb-0 qb-i-store-name",children:a.storeName?a.storeName:"- -"}),(0,s.jsx)("div",{className:"d-none d-md-flex ps-md-2",children:a.isQfferEnabled&&a.isStoreReviewDone?(0,s.jsx)("div",{className:"qb-i-store-status-badge qb-i-store-status-active",children:"Active"}):(0,s.jsx)("div",{className:"qb-i-store-status-badge",children:"Inactive"})})]}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-tags pb-2 pb-md-0",children:a.chainTags?a.chainTags:"- -"}),(0,s.jsx)("div",{className:"d-flex d-md-none",children:a.isQfferEnabled&&a.isStoreReviewDone?(0,s.jsx)("div",{className:"qb-i-store-status-badge qb-i-store-status-active",children:"Active"}):(0,s.jsx)("div",{className:"qb-i-store-status-badge",children:"Inactive"})})]})]}),(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-end pt-3 pt-md-none",children:[(null==g?void 0:g.isSuper)&&!h?(0,s.jsx)("div",{className:"pe-2 pe-md-3 qb-360-btn-wrapper",children:(0,s.jsx)(d.N,{partnerId:r.kh.partnerId360,callback:t,queryParameters:{redirect_url:"".concat(window.location.origin,"/static/whatsapp")},label:"Connect Whatsapp"})}):null,(0,s.jsx)("div",{className:"pe-1 pe-md-2",children:(0,s.jsx)(o.g,{onClick:n,children:"Edit"})}),(0,s.jsx)("div",{className:"ps-1 ps-md-2",children:(0,s.jsx)(o.K,{onClick:()=>{let e=a.isQfferEnabled&&a.isStoreReviewDone?"deactivate":"activate";l(a.storeId,a.storeName,e)},children:a.isQfferEnabled&&a.isStoreReviewDone?"Deactivate":"Activate"})})]})]}),(0,s.jsx)("div",{className:"qb-basic-card-wrap p-3 p-lg-4 d-flex flex-column",children:(0,s.jsx)("div",{className:"contianer-fluid px-0 py-3",children:(0,s.jsxs)("div",{className:"row gx-4 gy-4",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title",children:"Basic"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Store since"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.createdAt?c()(a.createdAt).format("DD, MMM, YY, hh:mm a"):"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Category"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainCategory&&r.kh.storeCategories[a.chainCategory]?r.kh.storeCategories[a.chainCategory]:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6 col-xl-8",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Tags"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainTags?a.chainTags:"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title",children:"Chain Details"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainName?a.chainName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Email"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainEmail?a.chainEmail:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-6",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Phone Number"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.chainManagerPhone?"+".concat(a.chainManagerPhone):"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title pt-3 pt-lg-4",children:"Store Details"})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeName?a.storeName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Email"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeEmail?a.storeEmail:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Manager Name"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeManagerName?a.storeManagerName:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Phone Number"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.storeManagerPhone?"+".concat(a.storeManagerPhone):"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Short Location"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:(null==p?void 0:p.shortLocation)?p.shortLocation:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-lg-9",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Address"}),(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc",children:a.locationDescription?a.locationDescription:"- -"})]})}),(0,s.jsx)("div",{className:"col-12 col-xl-10",children:(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Google Map Link"}),(null==p?void 0:p.locationUrl)?(0,s.jsxs)("a",{href:p.locationUrl,target:"_blank",rel:"noopener noreferrer",className:"mb-0 qb-i-store-info-link d-flex align-items-center",children:[(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc pe-1",children:p.locationUrl}),(0,s.jsx)("div",{children:(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M13.5 9.75V14.25C13.5 14.6478 13.342 15.0294 13.0607 15.3107C12.7794 15.592 12.3978 15.75 12 15.75H3.75C3.35218 15.75 2.97064 15.592 2.68934 15.3107C2.40804 15.0294 2.25 14.6478 2.25 14.25V6C2.25 5.60218 2.40804 5.22064 2.68934 4.93934C2.97064 4.65804 3.35218 4.5 3.75 4.5H8.25M11.25 2.25H15.75M15.75 2.25V6.75M15.75 2.25L7.5 10.5",stroke:"#090A0A","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})})})]}):(0,s.jsx)("p",{className:"mb-0 qb-i-store-info-desc pe-1",children:"- -"})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h2",{className:"mb-0 qb-i-store-info-section-title pt-3 pt-lg-4",children:"Branding Details"})}),(0,s.jsx)("div",{className:"col-8 col-md-4 col-lg-3 col-xl-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Logo"}),(0,s.jsx)("div",{className:"qb-i-store-info-logo-wrap position-relative",children:a.logoUrl?(0,s.jsx)(m(),{src:a.logoUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})}),(0,s.jsx)("div",{className:"col-12 col-md-8 col-lg-6 col-xl-4",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"Store front display image"}),(0,s.jsx)("div",{className:"qb-i-store-info-thumbnail-wrap position-relative",children:a.shopThumbnailUrl?(0,s.jsx)(m(),{src:a.shopThumbnailUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})}),(0,s.jsx)("div",{className:"col-6 col-md-3 col-lg-2",children:(0,s.jsxs)("div",{className:"d-flex flex-column w-100",children:[(0,s.jsx)("h3",{className:"mb-0 pb-2 qb-i-store-info-title",children:"UPI QR code"}),(0,s.jsx)("div",{className:"qb-i-store-info-logo-wrap position-relative",children:a.upiQRCodeUrl?(0,s.jsx)(m(),{src:a.upiQRCodeUrl,fill:!0,alt:"store logo",className:"qb-i-store-branding-img"}):null})]})})]})})})]})},b=l(9218),g=l(511),x=l(3439);let f={chainName:0,chainCategory:1,chainEmail:2,chainManagerPhone:3,storeName:4,storeEmail:5,storeManagerPhone:6,storeManagerName:7};var v=e=>{let{isVisible:a,handleBackdropClick:l,store:n,handleUpdation:t}=e,{internalUser:c}=(0,u.ZP)(),[d,h]=(0,i.useState)([{label:"Chain Name",fieldname:"chainName",placeholder:"Abbot Industries",value:"",id:1,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Chain name is required. Please provide your chain name.",inputWidthSize:"6"},{label:"Category",fieldname:"chainCategory",placeholder:"Select",value:"",id:5,keyboardType:"text",error:null,isRequired:!0,inputFieldType:"SELECT",isDropdownOpen:!1,selectBoxType:"category",emptyErrorMessage:"Category is required. Please select your category.",inputWidthSize:"6"},{label:"Chain Email",fieldname:"chainEmail",placeholder:"support@abbot.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Chain email is required. Please provide your chain email address.",inputWidthSize:"6"},{label:"Chain Phone",fieldname:"chainManagerPhone",placeholder:"999 999 9999",value:"",id:3,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Chain phone number is required. Please provide your chain phone number.",inputWidthSize:"6"},{label:"Store Name",fieldname:"storeName",placeholder:"Abbot Tech",value:"",id:4,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Store name is required. Please provide your store name.",inputWidthSize:"6"},{label:"Store Email",fieldname:"storeEmail",placeholder:"tech@abbot.com",value:"",id:6,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Store email is required. Please provide your chain email address.",inputWidthSize:"6"},{label:"Store Phone",fieldname:"storeManagerPhone",placeholder:"999 999 9999",value:"",id:7,keyboardType:"phone",error:null,isRequired:!0,countryCode:"+91",countryCodeValue:"91",countryCodePlaceholder:"+91",inputFieldType:"PHONE",emptyErrorMessage:"Store phone number is required. Please provide your store phone number.",inputWidthSize:"6"},{label:"Manager Name",fieldname:"storeManagerName",placeholder:"John Doe",value:"",id:8,keyboardType:"text",error:null,isRequired:!0,emptyErrorMessage:"Manager name is required. Please provide your manager name.",inputWidthSize:"6"}]),[m,p]=(0,i.useState)(null),[b,v]=(0,i.useState)(!1),[N,j]=(0,i.useState)([]),[y,w]=(0,i.useState)(null),q=(e,a)=>{let l=[...d];l[a].value=e,l[a].error=null,h(l)},C=(e,a)=>{let l=[...d];l[a].countryCode="+".concat(e.code),l[a].countryCodeValue=e.code,h(l)},P=()=>{let e={};return[...d].forEach(a=>{"chainCategory"!=a.fieldname&&"chainManagerPhone"!=a.fieldname&&"storeManagerPhone"!=a.fieldname&&a.value!=n[a.fieldname]&&(e[a.fieldname]=a.value)}),e},E=async()=>{let e=P(),a={chainId:n.chainId,chainCategory:y.value,storeId:n.storeId,isQfferEnabled:n.isQfferEnabled,isStoreReviewDone:n.isStoreReviewDone};t({...e,...a})},M=e=>{let a=[...d];a[e].isDropdownOpen=!d[e].isDropdownOpen,h(a)},S=(e,a,l,s)=>{let i=[...d];i[a].isDropdownOpen=!1,i[a].value=e.label,i[a].error=null,"category"===s&&w(e),h(i)},k=()=>{let e=n.chainManagerPhone?n.chainManagerPhone.slice(1):"",a=n.chainManagerPhone?n.chainManagerPhone.slice(0,1):"91",l=n.storeManagerPhone?n.storeManagerPhone.slice(1):"",s=n.storeManagerPhone?n.storeManagerPhone.slice(0,1):"91";1!=a&&(e=n.chainManagerPhone?n.chainManagerPhone.slice(2):"",a=n.chainManagerPhone?n.chainManagerPhone.slice(0,2):"91"),1!=s&&(l=n.storeManagerPhone?n.storeManagerPhone.slice(2):"",s=n.storeManagerPhone?n.storeManagerPhone.slice(0,2):"91");let i=[...d],o=n.chainCategory?{label:r.kh.storeCategories[n.chainCategory],value:n.chainCategory}:null;i[f.chainName].value=n.chainName,i[f.chainCategory].value=o?o.label:"",i[f.chainManagerPhone].value=e,i[f.chainManagerPhone].countryCode="+".concat(a),i[f.chainManagerPhone].countryCodeValue=a,i[f.chainManagerPhone].isDisabled=!!e,i[f.chainEmail].value=n.chainEmail,i[f.chainEmail].isDisabled=!!n.chainEmail,i[f.storeName].value=n.storeName,i[f.storeManagerName].value=n.storeManagerName,i[f.storeManagerPhone].value=l,i[f.storeManagerPhone].countryCode="+".concat(s),i[f.storeManagerPhone].countryCodeValue=s,i[f.storeManagerPhone].isDisabled=!!l,i[f.storeEmail].value=n.storeEmail,i[f.storeEmail].isDisabled=!!n.storeEmail,w(o),h(i)},R=()=>{let e,a=[];for(e in r.kh.storeCategories)a.push({label:r.kh.storeCategories[e],value:e});j(a)},T=()=>{let e=!0;return d.forEach(a=>{a.isRequired&&!a.value&&(e=!1)}),!e},D=(0,i.useMemo)(()=>T(),[d]);return(0,i.useEffect)(()=>{a&&(k(),R())},[a]),(0,s.jsx)(g.Z,{isVisible:a,handleBackdropClick:l,isLarge:!0,children:(0,s.jsxs)("div",{className:"w-100 p-5 d-flex flex-column position-relative qb-store-update-modal",children:[(0,s.jsx)("div",{className:"qb-close-btn-wrap position-absolute d-flex align-items-center justify-content-center",onClick:l,children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.55806 4.55806C4.80214 4.31398 5.19786 4.31398 5.44194 4.55806L10 9.11612L14.5581 4.55806C14.8021 4.31398 15.1979 4.31398 15.4419 4.55806C15.686 4.80214 15.686 5.19786 15.4419 5.44194L10.8839 10L15.4419 14.5581C15.686 14.8021 15.686 15.1979 15.4419 15.4419C15.1979 15.686 14.8021 15.686 14.5581 15.4419L10 10.8839L5.44194 15.4419C5.19786 15.686 4.80214 15.686 4.55806 15.4419C4.31398 15.1979 4.31398 14.8021 4.55806 14.5581L9.11612 10L4.55806 5.44194C4.31398 5.19786 4.31398 4.80214 4.55806 4.55806Z",fill:"#080A0A"})})}),(0,s.jsx)("div",{className:"container-fluid px-0 qb-store-modal-overflow-wrapper",children:(0,s.jsxs)("div",{className:"row gy-3",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("h3",{className:"qb-title mb-0 pb-2",children:"Edit details"})}),d.map((e,a)=>e.isInputHidden?null:(0,s.jsx)("div",{className:"col-12 col-lg-6",children:e.inputFieldType&&"PHONE"===e.inputFieldType?(0,s.jsx)(x.sb,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,countryCode:e.countryCode,codePlaceholder:e.countryCodePlaceholder,isDisabled:e.isDisabled,onCountryCodeSelect:C,onChange:q}):e.inputFieldType&&"SELECT"===e.inputFieldType?(0,s.jsx)(x.jL,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,options:N,isDropdownOpen:e.isDropdownOpen,onClick:M,onChange:q,onSelect:S}):(0,s.jsx)(x.Wz,{value:e.value,id:e.id,index:a,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onChange:q})},"input-".concat(a))),(null==m?void 0:m.length)?(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:m})}):null,(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"w-100 d-flex flex-column align-items-end pt-4",children:(0,s.jsx)(o.g,{isDisabled:D,isLoading:b,onDisabledClick:()=>{let e=[...d];d.forEach((a,l)=>{a.isRequired&&!a.value&&(e[l].error=a.emptyErrorMessage?a.emptyErrorMessage:"Required field. Please fill this field to continue.")}),h([...e])},onClick:E,children:(0,s.jsxs)(s.Fragment,{children:["Update",(0,s.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})})]})})]})})},N=l(9655),j=l(1096),y=l(9585),w=l(2388),q=()=>{let[e,a]=(0,i.useState)(null),[l,o]=(0,i.useState)(!0),[t,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1),[g,x]=(0,i.useState)({title:"",message:"",btnText:""}),[f,q]=(0,i.useState)(!1),[C,P]=(0,i.useState)(!1),{internalUser:E}=(0,u.ZP)(),{apiPut:M,apiGet:S,apiPost:k}=(0,N.kL)(),{triggerToast:R}=(0,j.ZP)(),{getUrlQueries:T}=(0,N.ZN)(),D=()=>{h(!1)},I=()=>{P(!1)},L=async(e,l,s)=>{var i;let n;o(!0);let t="".concat(r.kh.qfferAPI,"/internal/1/store/details/").concat(e),c=JSON.stringify({storeId:e,isQfferEnabled:"activate"===s,isStoreReviewDone:"activate"===s});try{n=await M(t,c,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(i=n)||void 0===i?void 0:i.message)&&"success"===n.message?(R("Store ".concat("activate"===s?"Activated":"Deactivated"),"Yaay! ".concat(l," has been successfully ").concat("activate"===s?"activated":"deactivated","."),"SUCCESS"),a(n.body)):R("".concat("activate"===s?"Activation":"Deactivation"," failed"),"Oops! we were not able to ".concat("activate"===s?"activate":"deactivate"," ").concat(l," due to some glitch."),"ERROR"),o(!1)},O=async l=>{var s;let i;I(),o(!0);let n="".concat(r.kh.qfferAPI,"/internal/1/store/details/").concat(e.storeId),t=JSON.stringify(l);try{i=await M(n,t,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(s=i)||void 0===s?void 0:s.message)&&"success"===i.message?(R("Details updated","Yaay! ".concat(e.storeName," details have been updated successfully."),"SUCCESS"),a(i.body)):R("Updation Failed","Oops! we were unable to update the details for ".concat(e.storeName,"."),"ERROR"),o(!1)},A=async e=>{var l,s;let i;let n=e?Number(e):t;o(!0);let d="".concat(r.kh.qfferAPI,"/internal/1/store/details/").concat(n);try{i=await S(d,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e),o(!1)}(null===(l=i)||void 0===l?void 0:l.message)&&"success"===i.message&&(null===(s=i)||void 0===s?void 0:s.body)&&(a(i.body),_(i.body),c(i.body.storeId)),o(!1)},U=async()=>{console.log("s: ",window.location.search.split("?"));let e=await T(window.location.href);(null==e?void 0:e.id)?A(e.id):window.location.href="/internal/stores?type=pending"},W=async a=>{var l;let s;o(!0),console.log("client ID: "+a.client),console.log("channel IDs: "+a.channels);let i="".concat(r.kh.qfferAPI,"/whatsapp/onboarding?merchantId=").concat(e.chainId),n=JSON.stringify({channelId:"[".concat(a.channels[0],"]"),clientId:a.client});try{s=await k(i,n,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e)}(null===(l=s)||void 0===l?void 0:l.message)&&"success"===s.message.toLowerCase()&&s.body?(q(!0),R("Whatsapp connected","Yaay! whatsapp communication connection for ".concat(e.storeName," has been successful."),"SUCCESS")):R("Whatsapp connection failed","Oops! whatsapp communication connection failed for ".concat(e.storeName,"."),"ERROR"),o(!1)},_=async e=>{var a;let l;let s="".concat(r.kh.qfferAPI,"/whatsapp/isOnboarded?merchantId=").concat(e.chainId);try{l=await S(s,null,null,null==E?void 0:E.accessToken)}catch(e){console.log(e)}(null===(a=l)||void 0===a?void 0:a.message)&&"success"===l.message.toLowerCase()&&l.body&&q(!0)};return(0,i.useEffect)(()=>{E&&U()},[E]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{children:l?(0,s.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center qb-internal-store-content-min-height",children:(0,s.jsx)(y.Z,{})}):e?(0,s.jsx)("div",{className:"qb-page-overflow-wrapper qb-internal-store-detail-wrap",children:(0,s.jsx)("div",{className:"qb-page-scroll-container",children:(0,s.jsx)("div",{className:"px-4 px-lg-5 py-4 py-lg-5 d-flex flex-column",children:(0,s.jsx)(p,{data:e,onStatusChange:(e,a,l)=>{x({title:"Confirm ".concat("activate"===l?"Activation":"Deactivation"),message:"Are you sure you want to change the activation status of ".concat(a," to ").concat("activate"===l?"active":"inactive","?"),btnText:"".concat("activate"===l?"Activate":"Deactivate"),id:e,name:a,type:l}),h(!0)},onEditClick:()=>{P(!0)},handle360Callback:W,isWhatsappConnected:f})})})}):(0,s.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,s.jsx)(m(),{src:w.Z,alt:"empty",className:"qb-empty-illustration"}),(0,s.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find the store details for you."})]})}),(0,s.jsx)(b.Z,{isVisible:d,title:null==g?void 0:g.title,message:null==g?void 0:g.message,btnText:null==g?void 0:g.btnText,btnAction:()=>{let{id:e,name:a,type:l}=g;L(e,a,l),D()},handleBackdropClick:D}),(0,s.jsx)(v,{isVisible:C,handleBackdropClick:I,store:e,handleUpdation:O})]})}}},function(e){e.O(0,[4885,3439,1007,9774,2888,179],function(){return e(e.s=5479)}),_N_E=e.O()}]);