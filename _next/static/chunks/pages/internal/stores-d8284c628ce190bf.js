(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2448],{1675:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/internal/stores",function(){return a(3644)}])},3644:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var l=a(5893),s=a(7294);let n=e=>{let{tab:t,i:a,id:s,onClick:n}=e;return(0,l.jsx)("div",{className:t.isSelected?"qb-page-tab-wrapper d-flex qb-page-tab-active":"qb-page-tab-wrapper d-flex",children:(0,l.jsxs)("div",{className:"qb-page-tab-container position-relative d-flex",onClick:()=>{n(a,s)},children:[(0,l.jsx)("h3",{className:"qb-page-tab-title",children:t.label}),(0,l.jsx)("div",{className:"qb-page-tab-indicator position-absolute"})]})})};var i=e=>{let{tabs:t,id:a,onClick:s}=e;return(0,l.jsx)("div",{className:"qb-page-tabs-wrapper d-flex align-items-center",children:t.map((e,t)=>(0,l.jsx)(n,{tab:e,id:a,i:t,onClick:s},"page-tab-".concat(a,"-x").concat(t)))})},c=a(172),r=a(5675),o=a.n(r);let d=e=>{let{children:t,width:a,expand:s,stopBubbling:n}=e,i=e=>{n&&e.stopPropagation()};return(0,l.jsx)(l.Fragment,{children:s?(0,l.jsx)("div",{className:"flex-fill",children:(0,l.jsx)("div",{className:"qb-table-cell",style:{minWidth:a?"".concat(a,"px"):"unset"},onClick:i,children:t})}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{style:{width:a?"".concat(a,"px"):"unset"},children:(0,l.jsx)("div",{className:"qb-table-cell",onClick:i,children:t})})})})},h=e=>{let{children:t,width:a,expand:s}=e;return(0,l.jsx)(l.Fragment,{children:s?(0,l.jsx)("div",{className:"flex-fill",children:(0,l.jsx)("div",{className:"qb-table-title-cell",style:{minWidth:a?"".concat(a,"px"):"unset"},children:t})}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{style:{width:a?"".concat(a,"px"):"unset"},children:(0,l.jsx)("div",{className:"qb-table-title-cell",children:t})})})})},b=e=>{let{total:t,current:a,onPageClick:n}=e,[i,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=[];if(t>5){let l=1,s=5;t-a>2&&a>3?(l=a-2,s=a+2):t-a<=2&&a>3&&(s=t,l=t-4),console.log(t,a);for(let t=l;t<=s;t++){let l={label:t,isCurrent:a===t};e.push(l)}}else for(let l=1;l<=t;l++){let t={label:l,isCurrent:a===l};e.push(t)}c(e)},[a]);let r=e=>{e.isCurrent||n(e)};return(0,l.jsx)("div",{className:"container-fluid d-flex flex-column align-items-end px-0",children:i?(0,l.jsx)("div",{className:"d-flex align-items-center px-3 py-3",children:i.map((e,t)=>(0,l.jsx)("div",{className:e.isCurrent?"qb-table-pagination-wrapper qb-table-current-page":"qb-table-pagination-wrapper",onClick:()=>r(e),children:(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-center qb-table-page-indicator",children:e.label})},"table-pagination-".concat(t)))}):null})};var u=a(5202),x=a(6264);let m=[{label:"Store Name",value:"storeName",width:150},{label:"Category",value:"storeCategory",width:150},{label:"Manager",value:"storeManagerName",width:120},{label:"Email",value:"storeEmail",width:180},{label:"Phone Number",value:"storePhoneNo",width:150},{label:"Store Address",value:"storeAddress",width:200,expand:!0},{label:"",value:"actions",width:150}],v=()=>(0,l.jsx)("div",{className:"container-fluid px-0 qb-table-head-wrap",children:(0,l.jsx)("div",{className:"d-flex align-items-stretch px-3",children:m.map((e,t)=>(0,l.jsx)(h,{width:e.width,index:t,initial:0===t,last:6===t,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:e.label})},"pending-store-table-title-cell-".concat(t)))})}),p=e=>{let{tableContent:t,i:a,handleStatus:s}=e;return(0,l.jsx)("div",{className:0===a?"container-fluid px-0 qb-table-row":"container-fluid px-0 qb-table-row qb-table-row-bordered",children:(0,l.jsxs)("div",{className:"d-flex align-items-stretch px-3",onClick:()=>{let e="/internal/store/detail?id=".concat(t.id);window.location.href=e},children:[(0,l.jsx)(d,{index:a,width:150,initial:!0,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeName?t.storeName:"- -"})}),(0,l.jsx)(d,{index:a,width:150,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeCategory&&u.kh.storeCategories[t.storeCategory]?u.kh.storeCategories[t.storeCategory]:"- -"})}),(0,l.jsx)(d,{index:a,width:120,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeManagerName?t.storeManagerName:"- -"})}),(0,l.jsx)(d,{index:a,width:180,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeEmail?t.storeEmail:"- -"})}),(0,l.jsx)(d,{index:a,width:150,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storePhoneNo?"+".concat(t.storePhoneNo):"- -"})}),(0,l.jsx)(d,{index:a,width:200,expand:!0,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeAddress?t.storeAddress:"- -"})}),(0,l.jsx)(d,{index:a,width:150,last:!0,stopBubbling:!0,children:(0,l.jsx)(x.g,{onClick:()=>{s(t.id,t.storeName)},children:"Activate"})})]})})},g=e=>{let{data:t,handleStatus:a}=e;return(0,l.jsx)(l.Fragment,{children:t.map((e,t)=>(0,l.jsx)(p,{i:t,tableContent:e,handleStatus:a},"pending-store-table-body-row-".concat(t)))})};var f=e=>{let{data:t,currentPage:a,totalPages:s,onPageChange:n,handleStatus:i}=e;return(0,l.jsxs)("div",{className:"qb-table-wrapper container-fluid px-0",children:[(0,l.jsx)("div",{className:"qb-table-overflow-wrapper container-fluid px-0",children:(0,l.jsxs)("div",{className:"qb-table-scrollable-container",children:[(0,l.jsx)(v,{}),(0,l.jsx)(g,{data:t,handleStatus:i})]})}),s&&s>1?(0,l.jsx)(b,{current:a,total:s,onPageClick:n}):null]})};let j=[{label:"Store Name",value:"storeName",width:150},{label:"Category",value:"storeCategory",width:150},{label:"Manager",value:"storeManagerName",width:120},{label:"Email",value:"storeEmail",width:180},{label:"Phone Number",value:"storePhoneNo",width:150},{label:"Store Address",value:"storeAddress",width:200,expand:!0},{label:"",value:"actions",width:150}],N=()=>(0,l.jsx)("div",{className:"container-fluid px-0 qb-table-head-wrap",children:(0,l.jsx)("div",{className:"d-flex align-items-stretch px-3",children:j.map((e,t)=>(0,l.jsx)(h,{width:e.width,index:t,initial:0===t,last:6===t,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:e.label})},"pending-store-table-title-cell-".concat(t)))})}),w=e=>{let{tableContent:t,i:a,handleStatus:s}=e;return(0,l.jsx)("div",{className:0===a?"container-fluid px-0 qb-table-row":"container-fluid px-0 qb-table-row qb-table-row-bordered",children:(0,l.jsxs)("div",{className:"d-flex align-items-stretch px-3",onClick:()=>{let e="/internal/store/detail?id=".concat(t.id);window.location.href=e},children:[(0,l.jsx)(d,{index:a,width:150,initial:!0,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeName?t.storeName:"- -"})}),(0,l.jsx)(d,{index:a,width:150,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeCategory&&u.kh.storeCategories[t.storeCategory]?u.kh.storeCategories[t.storeCategory]:"- -"})}),(0,l.jsx)(d,{index:a,width:120,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeManagerName?t.storeManagerName:"- -"})}),(0,l.jsx)(d,{index:a,width:180,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeEmail?t.storeEmail:"- -"})}),(0,l.jsx)(d,{index:a,width:150,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storePhoneNo?"+".concat(t.storePhoneNo):"- -"})}),(0,l.jsx)(d,{index:a,width:200,expand:!0,children:(0,l.jsx)("p",{className:"qb-table-content mb-0",children:t.storeAddress?t.storeAddress:"- -"})}),(0,l.jsx)(d,{index:a,width:150,last:!0,stopBubbling:!0,children:(0,l.jsx)(x.g,{onClick:()=>{s(t.id,t.storeName)},children:"Deactivate"})})]})})},q=e=>{let{data:t,handleStatus:a}=e;return(0,l.jsx)(l.Fragment,{children:t.map((e,t)=>(0,l.jsx)(w,{i:t,tableContent:e,handleStatus:a},"pending-store-table-body-row-".concat(t)))})};var y=e=>{let{data:t,currentPage:a,totalPages:s,onPageChange:n,handleStatus:i}=e;return(0,l.jsxs)("div",{className:"qb-table-wrapper container-fluid px-0",children:[(0,l.jsx)("div",{className:"qb-table-overflow-wrapper container-fluid px-0",children:(0,l.jsxs)("div",{className:"qb-table-scrollable-container",children:[(0,l.jsx)(N,{}),(0,l.jsx)(q,{data:t,handleStatus:i})]})}),s&&s>1?(0,l.jsx)(b,{current:a,total:s,onPageClick:n}):null]})},C=a(9585),A=a(2388),S={src:"/_next/static/media/search.ec70762d.png",height:324,width:320,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAnklEQVR42mMAgWf2VYwMuMBL/1qw5Nv4Bt4PKU0W38talf5vnsb0obgfoeltjD/j6+jWpPepHcHfi5o9fte3qf5/shmh4E1kKeebhI7Mt4UTvD7nN3v/rmnX/L9hGhOKVR8zm7U/ZrVEAK0I/NPS4vh/Yh8LioL/q+ax/OvqEvjT3Sb4q73J5F9XGxuKglfZM9jeVvTxvm2q42MgBQAAxRZC98ZRK7EAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},k=a(9655),P=a(2838),E=e=>{let{search:t,onStoreStatusChange:a}=e,[n,i]=(0,s.useState)(null),[c,r]=(0,s.useState)(!0),[d,h]=(0,s.useState)(1),[b,x]=(0,s.useState)(null),{apiGet:m}=(0,k.kL)(),{internalUser:v}=(0,P.ZP)(),p=async e=>{var a,l,s,n;let c;let o=e||d;r(!0);let b="".concat(u.kh.qfferAPI,"/internal/1/all-stores/short/list?isQfferActive=false&page=").concat(o,"&size=").concat(10,"&storeName=").concat(t);try{c=await m(b,null,null,null==v?void 0:v.accessToken)}catch(e){console.log(e),r(!1)}if((null===(a=c)||void 0===a?void 0:a.message)&&"success"===c.message&&(null===(s=c)||void 0===s?void 0:null===(l=s.body)||void 0===l?void 0:l.totalCount)){let e=Math.ceil(c.body.totalCount/10),t=c.body.data;h(o),x(e),i(t),r(!1)}else(null===(n=c)||void 0===n?void 0:n.message)&&"success"===c.message&&(h(o),i(null)),r(!1)},g=async e=>{var t,a,l;let s;let n=e||d;r(!0);let c="".concat(u.kh.qfferAPI,"/internal/1/all-stores/short/list?isQfferActive=false&page=").concat(n,"&size=").concat(10);try{s=await m(c,null,null,null==v?void 0:v.accessToken)}catch(e){console.log(e),r(!1)}if((null===(t=s)||void 0===t?void 0:t.message)&&"success"===s.message&&(null===(l=s)||void 0===l?void 0:null===(a=l.body)||void 0===a?void 0:a.totalCount)){let e=Math.ceil(s.body.totalCount/10),t=s.body.data;h(n),x(e),i(t),r(!1)}else r(!1)},j=async(e,t)=>{a(e,t,"activate")};return(0,s.useEffect)(()=>{t?p(1):g(1)},[t]),(0,l.jsx)("div",{className:"qb-page-overflow-wrapper",children:(0,l.jsx)("div",{className:"qb-page-scroll-container",children:(0,l.jsx)("div",{className:"px-4 px-lg-5 pt-3 pb-5",children:c?(0,l.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center qb-internal-store-content-min-height",children:(0,l.jsx)(C.Z,{})}):n&&n.length?(0,l.jsx)(f,{data:n,currentPage:d,totalPages:b,onPageChange:e=>{let a=e.label;t?p(a):g(a)},handleStatus:j}):t?(0,l.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,l.jsx)(o(),{src:S,alt:"empty",className:"qb-empty-illustration"}),(0,l.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find any inactive stores for the given query."})]}):(0,l.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,l.jsx)(o(),{src:A.Z,alt:"empty",className:"qb-empty-illustration"}),(0,l.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find any inactive stores for you."})]})})})})},M=e=>{let{search:t,onStoreStatusChange:a}=e,[n,i]=(0,s.useState)(null),[c,r]=(0,s.useState)(!0),[d,h]=(0,s.useState)(1),[b,x]=(0,s.useState)(null),{apiGet:m}=(0,k.kL)(),{internalUser:v}=(0,P.ZP)(),p=async e=>{var a,l,s,n;let c;let o=e||d;r(!0);let b="".concat(u.kh.qfferAPI,"/internal/1/all-stores/short/list?isQfferActive=true&page=").concat(o,"&size=").concat(10,"&storeName=").concat(t);try{c=await m(b,null,null,null==v?void 0:v.accessToken)}catch(e){console.log(e),r(!1)}if((null===(a=c)||void 0===a?void 0:a.message)&&"success"===c.message&&(null===(s=c)||void 0===s?void 0:null===(l=s.body)||void 0===l?void 0:l.totalCount)){let e=Math.ceil(c.body.totalCount/10),t=c.body.data;h(o),x(e),i(t),r(!1)}else(null===(n=c)||void 0===n?void 0:n.message)&&"success"===c.message&&(h(o),i(null)),r(!1)},g=async e=>{var t,a,l;let s;let n=e||d;r(!0);let c="".concat(u.kh.qfferAPI,"/internal/1/all-stores/short/list?isQfferActive=true&page=").concat(n,"&size=").concat(10);try{s=await m(c,null,null,null==v?void 0:v.accessToken)}catch(e){console.log(e),r(!1)}if((null===(t=s)||void 0===t?void 0:t.message)&&"success"===s.message&&(null===(l=s)||void 0===l?void 0:null===(a=l.body)||void 0===a?void 0:a.totalCount)){let e=Math.ceil(s.body.totalCount/10),t=s.body.data;h(n),x(e),i(t),r(!1)}else r(!1)},f=async(e,t)=>{a(e,t,"deactivate")};return(0,s.useEffect)(()=>{t?p(1):g(1)},[t]),(0,l.jsx)("div",{className:"qb-page-overflow-wrapper",children:(0,l.jsx)("div",{className:"qb-page-scroll-container",children:(0,l.jsx)("div",{className:"px-4 px-lg-5 pt-3 pb-5",children:c?(0,l.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center qb-internal-store-content-min-height",children:(0,l.jsx)(C.Z,{})}):n&&n.length?(0,l.jsx)(y,{data:n,currentPage:d,totalPages:b,onPageChange:e=>{let a=e.label;t?p(a):g(a)},handleStatus:f}):t?(0,l.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,l.jsx)(o(),{src:S,alt:"empty",className:"qb-empty-illustration"}),(0,l.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find any active stores for the given query."})]}):(0,l.jsxs)("div",{className:"w-100 d-flex align-items-center justify-content-center flex-column qb-internal-store-content-min-height",children:[(0,l.jsx)(o(),{src:A.Z,alt:"empty",className:"qb-empty-illustration"}),(0,l.jsx)("h5",{className:"qb-error-message pt-3 text-center",children:"Oops! We were not able to find any active stores for you."})]})})})})},Z=a(9218),T=a(3439),O=a(1163),R=a(1096),_=()=>{let[e,t]=(0,s.useState)([{label:"Pending",value:1,isSelected:!0},{label:"Active",value:2,isSelected:!1}]),[a,n]=(0,s.useState)(""),[r,o]=(0,s.useState)(null),[d,h]=(0,s.useState)(!1),[b,x]=(0,s.useState)({title:"",message:"",btnText:""}),[m,v]=(0,s.useState)(!0),{internalUser:p}=(0,P.ZP)(),{apiPut:g}=(0,k.kL)(),{triggerToast:f}=(0,R.ZP)(),{getUrlQueries:j}=(0,k.ZN)(),N=(0,O.useRouter)(),w=function(a){let l=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=e.map((e,t)=>{let l={...e};return t===a?l.isSelected=!0:l.isSelected=!1,l});if(l){let t=e[a].label.toLowerCase(),l="/internal/stores?type=".concat(t);N.push(l,void 0,{shallow:!0})}t(s)},q=e=>{"pending"===e.type?w(0,!1):"active"===e.type&&w(1,!1),v(!1)},y=async()=>{v(!0);let e=await j(window.location.href);(null==e?void 0:e.type)?q(e):(N.replace("/internal/stores?type=pending",void 0,{shallow:!0}),v(!1))},A=()=>{N.beforePopState(e=>{y()})},S=()=>{h(!1)},_=(e,t,a)=>{x({title:"Confirm ".concat("activate"===a?"Activation":"Deactivation"),message:"Are you sure you want to change the activation status of ".concat(t," to ").concat("activate"===a?"active":"inactive","?"),btnText:"".concat("activate"===a?"Activate":"Deactivate"),id:e,name:t,type:a}),h(!0)},D=async(e,t,a)=>{var l;let s;v(!0);let n="".concat(u.kh.qfferAPI,"/internal/1/store/details/").concat(e),i=JSON.stringify({storeId:e,isQfferEnabled:"activate"===a,isStoreReviewDone:"activate"===a});try{s=await g(n,i,null,null,null==p?void 0:p.accessToken)}catch(e){console.log(e),v(!1)}(null===(l=s)||void 0===l?void 0:l.message)&&"success"===s.message?f("Store ".concat("activate"===a?"Activated":"Deactivated"),"Yaay! ".concat(t," has been successfully ").concat("activate"===a?"activated":"deactivated","."),"SUCCESS"):f("".concat("activate"===a?"Activation":"Deactivation"," failed"),"Oops! we were not able to ".concat("activate"===a?"activate":"deactivate"," ").concat(t," due to some glitch."),"ERROR"),v(!1)};return(0,s.useEffect)(()=>{y()},[]),(0,s.useEffect)(()=>{A()},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)("div",{className:"container-fluid qb-stores-sub-header d-flex pt-4 pb-3 px-4 px-lg-5 align-items-center justify-content-between",children:[(0,l.jsx)("div",{className:"d-flex",children:(0,l.jsx)(i,{tabs:e,id:"store-page",onClick:w})}),(0,l.jsx)("div",{className:"d-flex qb-stores-search-wrapper",children:(0,l.jsx)(T.Rj,{placeholder:"Search for stores",id:1,index:1,fieldType:"text",onChange:e=>{n(e)},handleSearch:()=>{o(a)},onSearchClear:()=>{n(""),o(null)},value:a,fieldname:"store-search"})})]}),(0,l.jsx)("div",{className:"d-flex flex-column qb-flex-fill",children:m?(0,l.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center qb-internal-store-content-min-height",children:(0,l.jsx)(C.Z,{})}):(0,l.jsx)(l.Fragment,{children:e.map(e=>1===e.value&&e.isSelected?(0,l.jsx)(E,{search:r,onStoreStatusChange:_},"store-tab-".concat(e.label)):2===e.value&&e.isSelected?(0,l.jsx)(M,{search:r,onStoreStatusChange:_},"store-tab-".concat(e.label)):null)})})]}),(0,l.jsx)(Z.Z,{isVisible:d,title:null==b?void 0:b.title,message:null==b?void 0:b.message,btnText:null==b?void 0:b.btnText,btnAction:()=>{let{id:e,name:t,type:a}=b;D(e,t,a),S()},handleBackdropClick:S})]})}}},function(e){e.O(0,[3439,8977,9774,2888,179],function(){return e(e.s=1675)}),_N_E=e.O()}]);