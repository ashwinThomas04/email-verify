(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3820],{9681:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalas/auth/login",function(){return a(3269)}])},3188:function(e,s,a){"use strict";var i=a(5893),l=a(7294),r=a(3582),n=a(6264),o=a(5202),t=a(9655),d=a(1664),c=a.n(d);let u={email:0,password:1};s.Z=e=>{let{storeId:s,handleSuccess:a,signupUrl:d,otpUrl:p,passwordResetURL:m}=e,[h,w]=(0,l.useState)([{label:"Email",fieldname:"email",placeholder:"johndoe@company.com",value:"",id:2,keyboardType:"email",error:null,isRequired:!0,emptyErrorMessage:"Email is required. Please provide your email address.",inputWidthSize:"12"},{label:"Password",fieldname:"password",placeholder:"********",value:"",id:4,keyboardType:"password",error:null,isRequired:!0,isPassword:!0,isPasswordVisible:!1,emptyErrorMessage:"Password is required. Please provide a suitable password.",inputWidthSize:"12"}]),[f,g]=(0,l.useState)(null),[x,b]=(0,l.useState)(!1),{apiPost:v}=(0,t.kL)(),{emailValidation:j,passwordValidation:y,returnErrorTexts:q}=(0,t.V$)(),z=(e,s)=>{let a=[...h];a[s].value=e,a[s].error=null,w(a)},N=e=>{let s=[...h],a=h[e].isPasswordVisible;s[e].keyboardType=a?"password":"default",s[e].isPasswordVisible=!a,w(s)},P=async()=>{let e=await j(h[u.email].value),i=await y(h[u.password].value);if(e&&i&&s){var l,r,n,t;let e;g(null),b(!0);let i="".concat(o.kh.qubriuxAPI,"/store/").concat(s,"/customer/signIn/email"),d=JSON.stringify({email:h[u.email].value.toLowerCase(),password:h[u.password].value,storeId:s});try{e=await v(i,d)}catch(e){g("Something went wrong! Please try again after some time."),b(!1)}(null===(l=e)||void 0===l?void 0:l.message)&&(null===(r=e)||void 0===r?void 0:r.message.toLowerCase())==="success"?(console.log("response: ",e.body),a(e.body)):((null===(n=e)||void 0===n?void 0:n.message)&&(null===(t=e)||void 0===t?void 0:t.message.toLowerCase())==="failure"&&e.body?g(e.body):g("Something went wrong! Please try again after some time."),b(!1))}else{let a=[...h];e||(a[u.email].error=await q(h[u.email].value,"email")),i||(a[u.password].error=await q(h[u.password].value,"password")),s||g("This link seems to be expired or broken, Please try again with another link."),w(a)}},k=()=>{let e=!0;return h.forEach(s=>{s.isRequired&&!s.value&&(e=!1)}),!e},S=(0,l.useMemo)(()=>k(),[h]);return(0,i.jsxs)("form",{className:"qb-signup-form px-md-5 py-5 d-flex flex-column align-items-stretch",id:"qb-signupform",children:[(0,i.jsx)("h3",{className:"qb-title mb-0 pb-4 qb-signup-title-text",children:"Login"}),(0,i.jsx)("div",{className:"container-fluid px-0 pt-md-0",children:(0,i.jsxs)("div",{className:"row gy-3",children:[h.map((e,s)=>e.isInputHidden?null:(0,i.jsx)("div",{className:"col-12 col-lg-".concat(e.inputWidthSize),children:(0,i.jsx)(r.Wz,{value:e.value,id:e.id,index:s,label:e.label,placeholder:e.placeholder,fieldname:e.fieldname,error:e.error,isRequired:e.isRequired,fieldType:e.keyboardType,isPassword:e.isPassword,showPassword:e.isPasswordVisible,isDisabled:e.isDisabled,onViewPassword:N,onChange:z})},"input-".concat(s))),(null==f?void 0:f.length)?(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("p",{className:"qb-input-error-message mt-1 qb-general-error qb-error-active",children:f})}):null,(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"w-100 pt-md-3 pt-3 d-flex align-items-center justify-content-end",children:(0,i.jsxs)("p",{className:"qb-description",children:["Trouble logging in? ",(0,i.jsx)(c(),{href:m,className:"qb-link",children:"Reset password"})]})})}),(0,i.jsx)("div",{className:"col-lg-12",children:(0,i.jsxs)("div",{className:"w-100 pt-md-3 pt-3 d-flex align-items-center justify-content-end",children:[(0,i.jsx)("div",{className:"pe-4 d-flex align-items-center",children:(0,i.jsx)(c(),{href:p,className:"qb-link",children:"Login using OTP"})}),(0,i.jsx)("div",{className:"d-flex",children:(0,i.jsx)(n.K,{id:"qb-profile-btn",isDisabled:S,isLoading:x,onDisabledClick:()=>{let e=[...h];h.forEach((s,a)=>{s.isRequired&&!s.value&&(e[a].error=s.emptyErrorMessage?s.emptyErrorMessage:"Required field. Please fill this field to continue.")}),w([...e])},onClick:P,children:(0,i.jsxs)(i.Fragment,{children:["Login",(0,i.jsx)("span",{className:"qb-btn-loader ms-2"})]})})})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"w-100 flex-column align-items-center align-items-md-end d-flex",children:d?(0,i.jsxs)("p",{className:"qb-description",children:["Donâ€™t have an account? ",(0,i.jsx)(c(),{href:d,className:"qb-link",children:"Signup"})]}):null})})]})})]})}},3269:function(e,s,a){"use strict";a.r(s);var i=a(5893),l=a(7294),r=a(8295),n=a(9008),o=a.n(n),t=a(3188),d=a(5202),c=a(2838),u=a(3553),p=a(9655);s.default=()=>{let[e,s]=(0,l.useState)(""),[a,n]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[w,f]=(0,l.useState)(""),{onSignUp:g}=(0,c.ZP)(),{updateUserStorageData:x}=(0,u.Z)(),{breakDownUrl:b}=(0,p.ZN)(),v=e=>{let s="/pizzawalas/auth/signup",a="/pizzawalas/auth/otp-login",i="/pizzawalas/auth/forgot-password";if(e.queries){let l;let r=0;for(l in e.queries)s="".concat(s).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),a="".concat(a).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),i="".concat(i).concat(0===r?"?":"&").concat(l,"=").concat(e.queries[l]),r++}n(s),h(i),f(a)},j=async()=>{let e=d.kh.storeMap.PIZZAWALA.amx,a=window.location.href,i=await b(a);v(i),i.queries&&i.queries.amx&&(e=i.queries.amx),s(e)};return(0,l.useEffect)(()=>{j()},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Pizzawala's | Login"}),(0,i.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,i.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,i.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,i.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),(0,i.jsx)(r.Z,{type:"PIZZAWALA",children:(0,i.jsx)(t.Z,{storeId:e,handleSuccess:e=>{let s=e.accessToken,a={...e,signupUrl:"/pizzawalas/auth/signup"};g(s,a,"PIZZAWALAS"),x(a,s,"PIZZAWALAS"),window.location.href="/pizzawalas/user/overview"},signupUrl:a,otpUrl:w,passwordResetURL:m})})]})}}},function(e){e.O(0,[1664,3582,6211,9774,2888,179],function(){return e(e.s=9681)}),_N_E=e.O()}]);