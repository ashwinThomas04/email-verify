(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{6424:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalas/auth/profile",function(){return s(7176)}])},7176:function(e,i,s){"use strict";s.r(i);var a=s(5893),n=s(7294),t=s(5353),l=s(8295),o=s(1102),r=s(2688),c=s(6835),u=s(6775),p=s(9655),f=s(7953),h=s(9008),d=s.n(h);i.default=()=>{let[e,i]=(0,n.useState)("PROFILE"),[s,h]=(0,n.useState)(!1),[w,x]=(0,n.useState)(null),[g,k]=(0,n.useState)(null),[y,m]=(0,n.useState)(!1),[v,z]=(0,n.useState)(null),[P,j]=(0,n.useState)(null),[S,b]=(0,n.useState)(!1),{apiPost:O,apiGet:_}=(0,p.kL)(),{breakDownUrl:E}=(0,p.ZN)(),Z=()=>{i("PROFILE")},I=()=>{Z(),m(!0)},q=(e,i)=>{j({title:e,message:i}),b(!0)},A=async(e,i)=>{let s="".concat(f.kh.qfferAPI,"/customer/auth/verify/cx/email/").concat(e),a=JSON.stringify({value:i});try{await O(s,a)}catch(e){console.log("verify",e)}},T=async e=>{let i,s="".concat(f.kh.qfferAPI,"/customer/web/profile");try{return i=await _(s,null,e)}catch(e){return console.log(e),i}},N=async e=>{let i=await T(e);console.log("resp: ",i),i&&"success"===i.message?(h(!0),k(i.body)):(console.log("error"),setTimeout(()=>{q("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300))},L=async()=>{var e,i,s;let a=window.location.href,n=await E(a);if((null===(e=n.queries)||void 0===e?void 0:e.tx)?(z(n.queries.tx),N(n.queries.tx)):setTimeout(()=>{q("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},1e3),(null===(i=n.queries)||void 0===i?void 0:i.cx)&&(null===(s=n.queries)||void 0===s?void 0:s.k)){let e=await A(n.queries.k,n.queries.cx);e&&console.log("success: ",e)}};return(0,n.useEffect)(()=>{L()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d(),{children:[(0,a.jsx)("title",{children:"Pizzawala's | Profile"}),(0,a.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,a.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{type:"PIZZAWALA",children:"PROFILE"===e?(0,a.jsx)(o.Z,{navigateToOtp:e=>{x(JSON.parse(e)),i("OTP")},customerDetails:g,token:v,successPopup:I}):(0,a.jsx)(t.Z,{authType:"PROFILE",user:w,handleSuccess:I,token:v})}),(0,a.jsx)(r.Z,{isVisible:y,handleBackdropClick:()=>{m(!1),window.location.href="/pizzawalas/auth/login"},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]}):(0,a.jsx)(c.Z,{removePreloader:s,loaderType:"PIZZAWALAS"}),(0,a.jsx)(u.Z,{isVisible:S,handleBackdropClick:()=>{},title:null==P?void 0:P.title,message:null==P?void 0:P.message})]})}}},function(e){e.O(0,[775,601,345,419,774,888,179],function(){return e(e.s=6424)}),_N_E=e.O()}]);