(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{5216:function(e,i,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pizzawalasdemo/auth/profile",function(){return a(2824)}])},2824:function(e,i,a){"use strict";a.r(i);var s=a(5893),t=a(7294),n=a(5353),l=a(3283),r=a(1102),o=a(2539),u=a(3824),c=a(6775),p=a(9655),d=a(7953),f=a(9008),h=a.n(f);i.default=()=>{let[e,i]=(0,t.useState)("PROFILE"),[a,f]=(0,t.useState)(!1),[x,k]=(0,t.useState)(null),[w,y]=(0,t.useState)(null),[g,m]=(0,t.useState)(!1),[v,z]=(0,t.useState)(null),[P,j]=(0,t.useState)(null),[S,b]=(0,t.useState)(!1),{apiPost:E,apiGet:O}=(0,p.kL)(),{breakDownUrl:_}=(0,p.ZN)(),q=()=>{i("PROFILE")},I=()=>{q(),m(!0)},T=(e,i)=>{j({title:e,message:i}),b(!0)},Z=async(e,i)=>{let a="".concat(d.kh.qfferAPI,"/customer/auth/verify/cx/email/").concat(e),s=JSON.stringify({value:i});try{await E(a,s)}catch(e){}},N=async e=>{let i,a="".concat(d.kh.qfferAPI,"/customer/web/profile");try{return i=await O(a,null,e)}catch(e){return i}},A=async e=>{let i=await N(e);i&&"success"===i.message?(f(!0),y(i.body)):setTimeout(()=>{T("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},300)},F=async()=>{var e,i,a;let s=window.location.href,t=await _(s);(null===(e=t.queries)||void 0===e?void 0:e.tx)?(z(t.queries.tx),A(t.queries.tx)):setTimeout(()=>{T("Invalid link","Oops! this link seems to be expired or broken, Please try again with another link.")},1e3),(null===(i=t.queries)||void 0===i?void 0:i.cx)&&(null===(a=t.queries)||void 0===a?void 0:a.k)&&await Z(t.queries.k,t.queries.cx)};return(0,t.useEffect)(()=>{F()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h(),{children:[(0,s.jsx)("title",{children:"Pizzawala's | Profile"}),(0,s.jsx)("link",{rel:"icon",href:"/pizzawalas/favicon.ico"}),(0,s.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/pizzawalas/apple-touch-icon.png"}),(0,s.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/pizzawalas/favicon-32x32.png"}),(0,s.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/pizzawalas/favicon-16x16.png"}),(0,s.jsx)("link",{rel:"manifest",href:"/pizzawalas/site.webmanifest"})]}),a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{type:"PIZZAWALA",children:"PROFILE"===e?(0,s.jsx)(r.Z,{navigateToOtp:e=>{k(JSON.parse(e)),i("OTP")},customerDetails:w,token:v,successPopup:I}):(0,s.jsx)(n.Z,{authType:"PROFILE",user:x,handleSuccess:I,token:v})}),(0,s.jsx)(o.Z,{isVisible:g,handleBackdropClick:()=>{m(!1)},title:"Welcome Aboard",message:"Congratulations on signing up for our loyalty program. Stay Tuned! Exciting offers and loyalty rewards are on your way."})]}):(0,s.jsx)(u.Z,{removePreloader:a,loaderType:"BASE"}),(0,s.jsx)(c.Z,{isVisible:S,handleBackdropClick:()=>{},title:null==P?void 0:P.title,message:null==P?void 0:P.message})]})}}},function(e){e.O(0,[775,56,419,774,888,179],function(){return e(e.s=5216)}),_N_E=e.O()}]);